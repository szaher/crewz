@tailwind base;
@tailwind components;
@tailwind utilities;

@layer utilities {
  @keyframes slide-in {
    from {
      transform: translateX(100%);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  .animate-slide-in {
    animation: slide-in 0.3s ease-out;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(4px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fadeIn {
    animation: fadeIn 0.2s ease-out;
  }

  @keyframes typingCursor {
    0%, 100% { opacity: 1; }
    50% { opacity: 0; }
  }

  .typing-cursor {
    animation: typingCursor 1s infinite;
  }

  @keyframes messageSlideIn {
    from {
      opacity: 0;
      transform: translateY(8px) scale(0.98);
    }
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  .animate-messageSlideIn {
    animation: messageSlideIn 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  @keyframes shimmer {
    0% { background-position: -100% 0; }
    100% { background-position: 100% 0; }
  }

  .animate-shimmer {
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(59, 130, 246, 0.1) 50%,
      transparent 100%
    );
    background-size: 200% 100%;
    animation: shimmer 2s infinite;
  }
}

/* Basic dark mode background/text to reflect theme toggle */
html.dark body {
  @apply bg-gray-900 text-gray-100;
}

/* Dark mode overrides for common utility classes used across the app.
   These ensure readable text and proper surfaces without touching every component. */
.dark .text-gray-900 { color: #f3f4f6 !important; } /* gray-100 */
.dark .text-gray-800 { color: #e5e7eb !important; } /* gray-200 */
.dark .text-gray-700 { color: #e5e7eb !important; } /* gray-200 */
.dark .text-gray-600 { color: #9ca3af !important; } /* gray-400 */
.dark .text-gray-500 { color: #9ca3af !important; } /* gray-400 */
.dark .text-gray-400 { color: #6b7280 !important; } /* gray-500 */

.dark .bg-white { background-color: #111827 !important; } /* gray-900 */
.dark .bg-gray-50 { background-color: #111827 !important; } /* gray-900 */
.dark .bg-gray-100 { background-color: #1f2937 !important; } /* gray-800 */
.dark .bg-gray-200 { background-color: #374151 !important; } /* gray-700 */
.dark .bg-gray-300 { background-color: #4b5563 !important; } /* gray-600 */

.dark .border-gray-200 { border-color: #1f2937 !important; } /* gray-800 */
.dark .border-gray-300 { border-color: #374151 !important; } /* gray-700 */
.dark .border-gray-100 { border-color: #1f2937 !important; } /* gray-800 */

/* Common hover backgrounds */
.dark .hover\:bg-gray-50:hover { background-color: #1f2937 !important; }  /* gray-800 */
.dark .hover\:bg-gray-100:hover { background-color: #1f2937 !important; } /* gray-800 */
.dark .hover\:bg-gray-200:hover { background-color: #374151 !important; } /* gray-700 */
.dark .hover\:bg-blue-50:hover { background-color: rgba(30, 58, 138, 0.30) !important; }
.dark .hover\:bg-blue-100:hover { background-color: rgba(30, 58, 138, 0.35) !important; }
.dark .hover\:bg-amber-50:hover { background-color: rgba(120, 53, 15, 0.20) !important; }
.dark .hover\:bg-purple-50:hover { background-color: rgba(76, 29, 149, 0.25) !important; }
.dark .hover\:bg-green-50:hover { background-color: rgba(20, 83, 45, 0.25) !important; }
.dark .hover\:text-blue-700:hover { color: #93c5fd !important; } /* blue-300 */
.dark .hover\:border-blue-300:hover { border-color: #60a5fa !important; } /* blue-400 */

/* Rounded/flex containers often use these combos; ensure contrast */
.dark .shadow, .dark .shadow-md, .dark .shadow-lg { --tw-shadow-color: rgba(0,0,0,0.6); }

/* Color highlight adaptations (common quick actions & badges) */
.dark .bg-blue-50 { background-color: rgba(30, 58, 138, 0.30) !important; }   /* blue-900 @30% */
.dark .bg-blue-100 { background-color: rgba(30, 58, 138, 0.35) !important; }
.dark .text-blue-700 { color: #93c5fd !important; } /* blue-300 */
.dark .border-blue-200 { border-color: rgba(30, 58, 138, 0.6) !important; }

.dark .bg-amber-50 { background-color: rgba(120, 53, 15, 0.20) !important; }  /* amber-900 @20% */
.dark .text-amber-900 { color: #fbbf24 !important; } /* amber-400 */
.dark .text-amber-800 { color: #f59e0b !important; } /* amber-500 */
.dark .border-amber-300 { border-color: rgba(120,53,15,0.5) !important; }

.dark .hover\:bg-red-50:hover { background-color: rgba(127, 29, 29, 0.20) !important; } /* red-900 @20% */

.dark .bg-purple-50 { background-color: rgba(76, 29, 149, 0.25) !important; } /* purple-900 @25% */
.dark .text-purple-700 { color: #c4b5fd !important; } /* purple-300 */

.dark .bg-green-50 { background-color: rgba(20, 83, 45, 0.25) !important; } /* green-900 @25% */
.dark .text-green-700 { color: #86efac !important; } /* green-300 */

/* Prose adjustments for better readability in dark/light */
.prose a { @apply text-blue-600 underline-offset-2 hover:underline; }
.dark .prose a { @apply text-blue-300; }

.prose blockquote { @apply border-l-4 border-gray-200 text-gray-700; }
.dark .prose blockquote { @apply border-blue-900/50 text-gray-200; }

.prose code { @apply text-pink-600; }
.dark .prose code { @apply text-pink-300; }

/* Prose tables and lists */
.prose table { @apply w-full border-collapse text-sm; }
.prose thead th { @apply bg-gray-100 text-gray-700 px-3 py-2 border border-gray-200; }
.prose tbody td { @apply px-3 py-2 border border-gray-200; }
.prose tbody tr:nth-child(odd) { @apply bg-white; }
.prose tbody tr:nth-child(even) { @apply bg-gray-50; }
.prose hr { @apply border-gray-200; }
.prose ul > li::marker { color: #6b7280; } /* gray-500 */
.prose ol > li::marker { color: #6b7280; }

.dark .prose thead th { @apply bg-gray-800 text-gray-200 border-gray-700; }
.dark .prose tbody td { @apply border-gray-700; }
.dark .prose tbody tr:nth-child(odd) { @apply bg-gray-900; }
.dark .prose tbody tr:nth-child(even) { @apply bg-gray-800; }
.dark .prose hr { @apply border-gray-700; }

/* Subtle patterned background for chat surface */
.chat-surface {
  background:
    radial-gradient(circle at 1px 1px, rgba(0,0,0,0.04) 1px, transparent 1px) 0 0/16px 16px,
    linear-gradient(180deg, #ffffff 0%, #f8fafc 100%);
}
.dark .chat-surface {
  background:
    radial-gradient(circle at 1px 1px, rgba(255,255,255,0.06) 1px, transparent 1px) 0 0/16px 16px,
    linear-gradient(180deg, #1f2937 0%, #0f172a 100%);
}

/* Gradient glow border on focus for floating input */
.glow-card {
  position: relative;
  border-radius: 1rem; /* match rounded-2xl */
}
.glow-card::before {
  content: "";
  position: absolute;
  inset: -2px;
  border-radius: inherit;
  background: linear-gradient(90deg, #60a5fa 0%, #a78bfa 50%, #f472b6 100%);
  opacity: 0;
  transition: opacity 150ms ease, filter 150ms ease;
  filter: blur(6px);
  pointer-events: none;
}
.glow-card:focus-within::before {
  opacity: 0.4;
}

/* Recording state glow (mic active) */
.glow-card.recording::before {
  background: linear-gradient(90deg, #f87171 0%, #fb923c 50%, #f97316 100%);
  opacity: 0.6;
  filter: blur(8px);
}
.dark .prose ul > li::marker { color: #9ca3af; } /* gray-400 */
.dark .prose ol > li::marker { color: #9ca3af; }

/* Generic form controls in dark mode */
.dark input:not([type='checkbox']):not([type='radio']),
.dark textarea,
.dark select {
  background-color: #111827 !important; /* gray-900 */
  color: #f3f4f6 !important; /* gray-100 */
  border-color: #374151 !important; /* gray-700 */
}
.dark input::placeholder,
.dark textarea::placeholder {
  color: #9ca3af !important; /* gray-400 */
}
.dark input:focus,
.dark textarea:focus,
.dark select:focus {
  outline: none !important;
  border-color: #2563eb !important; /* blue-600 */
  box-shadow: 0 0 0 1px #2563eb33;
}
