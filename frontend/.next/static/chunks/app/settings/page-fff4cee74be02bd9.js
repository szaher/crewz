(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[938],{120:function(e,a,r){Promise.resolve().then(r.bind(r,1077))},1077:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return g}});var t=r(7437),s=r(9755),d=r(8563),l=r(8541),n=r(2265),i=r(4033),c=r(6312);function g(){var e,a,r;let g=(0,i.useRouter)(),{theme:o,setTheme:x}=(0,l.HB)(),{clearAuth:m,user:u}=(0,l.tN)(),{currentTenant:y,setTenant:b}=(0,l.qT)(),[h,f]=(0,n.useState)((null==y?void 0:y.name)||""),[k,v]=(0,n.useState)({max_users:y&&null!==(e=y.max_users)&&void 0!==e?e:10,max_agents:y&&null!==(a=y.max_agents)&&void 0!==a?a:50,max_flows:y&&null!==(r=y.max_flows)&&void 0!==r?r:100}),[p,j]=(0,n.useState)(!1),[N,w]=(0,n.useState)(!1),_=(null==u?void 0:u.role)==="admin",[S,C]=(0,n.useState)(JSON.stringify((null==y?void 0:y.settings)||{},null,2)),[O,E]=(0,n.useState)(null);(0,n.useEffect)(()=>{(async()=>{j(!0);let e=await c.x.get("/api/v1/tenant");if(j(!1),e.data){let a=e.data;f(a.name),v({max_users:a.max_users,max_agents:a.max_agents,max_flows:a.max_flows}),C(JSON.stringify(a.settings||{},null,2)),b({id:a.id,name:a.name,schema_name:a.schema_name,is_active:"active"===a.status,settings:a.settings||{}})}})()},[]);let J=async()=>{let e;w(!0),E(null);try{e=JSON.parse(S||"{}")}catch(e){E("Invalid JSON in settings"),w(!1);return}let a=await c.x.put("/api/v1/tenant",{name:h,max_users:k.max_users,max_agents:k.max_agents,max_flows:k.max_flows,settings:e});if(w(!1),a.data){let e=a.data;b({id:e.id,name:e.name,schema_name:e.schema_name,is_active:"active"===e.status,settings:e.settings||{}})}else a.error&&alert(a.error)};return(0,t.jsx)(s.Z,{children:(0,t.jsxs)("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[(0,t.jsx)(d.Z,{}),(0,t.jsx)("div",{className:"flex-1 overflow-auto",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Settings"}),(0,t.jsx)("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Manage your preferences"})]}),(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("section",{className:"bg-white dark:bg-gray-900 rounded-lg shadow border border-gray-200 dark:border-gray-800",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-800",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Appearance"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Customize how the app looks to you."})]}),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Theme"}),(0,t.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Choose light, dark, or follow system"})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:["light","dark","system"].map(e=>(0,t.jsx)("button",{onClick:()=>x(e),className:"px-3 py-1.5 rounded-md border text-sm capitalize ".concat(o===e?"bg-blue-600 text-white border-blue-600":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 border-gray-300 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"),children:e},e))})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-3",children:"Theme preference is saved on this device."})]})]}),(0,t.jsxs)("section",{className:"bg-white dark:bg-gray-900 rounded-lg shadow border border-gray-200 dark:border-gray-800",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-800",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Organization"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Your current workspace details."})]}),(0,t.jsxs)("div",{className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Name"}),(0,t.jsx)("input",{type:"text",disabled:!_,value:h,onChange:e=>f(e.target.value),className:"mt-1 block w-full px-3 py-2 border rounded-md ".concat(_?"border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-1 focus:ring-blue-600 focus:border-blue-600":"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400")})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:["max_users","max_agents","max_flows"].map(e=>(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:e.replace("_"," ")}),(0,t.jsx)("input",{type:"number",min:1,disabled:!_,value:k[e],onChange:a=>v({...k,[e]:Number(a.target.value)}),className:"mt-1 block w-full px-3 py-2 border rounded-md ".concat(_?"border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-1 focus:ring-blue-600 focus:border-blue-600":"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400")})]},e))}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Settings (JSON)"}),O&&(0,t.jsx)("div",{className:"text-xs text-red-600",children:O})]}),(0,t.jsx)("textarea",{value:S,onChange:e=>C(e.target.value),disabled:!_,rows:8,className:"mt-1 block w-full p-3 text-xs font-mono border rounded-md ".concat(_?"border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-1 focus:ring-blue-600 focus:border-blue-600":"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400")})]}),(0,t.jsx)("div",{className:"pt-2 flex justify-end",children:(0,t.jsx)("button",{onClick:J,disabled:!_||N,className:"px-4 py-2 rounded-md text-white ".concat(!_||N?"bg-blue-300":"bg-blue-600 hover:bg-blue-700"),children:N?"Saving...":"Save Settings"})})]})]}),(0,t.jsxs)("section",{className:"bg-white dark:bg-gray-900 rounded-lg shadow border border-gray-200 dark:border-gray-800",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-800",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Security"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Session and account security options."})]}),(0,t.jsxs)("div",{className:"p-6 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Sign out"}),(0,t.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"End your current session on this device."})]}),(0,t.jsx)("button",{onClick:()=>{m(),g.push("/login")},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Log out"})]})]})]})]})})]})})}},4033:function(e,a,r){e.exports=r(5313)}},function(e){e.O(0,[311,67,971,458,744],function(){return e(e.s=120)}),_N_E=e.O()}]);