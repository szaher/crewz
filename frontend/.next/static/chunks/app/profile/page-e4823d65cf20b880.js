(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{69:function(e,s,r){Promise.resolve().then(r.bind(r,2509))},2509:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return o}});var l=r(7437),a=r(9755),t=r(8563),d=r(8541),n=r(2265),i=r(6312);function o(){var e;let{user:s,token:r,setAuth:o}=(0,d.tN)(),{currentTenant:c}=(0,d.qT)(),[u,m]=(0,n.useState)((null==s?void 0:s.full_name)||""),[x,b]=(0,n.useState)(!1),[g,h]=(0,n.useState)(null),[p,f]=(0,n.useState)(""),[v,y]=(0,n.useState)(""),[j,N]=(0,n.useState)(""),[w,k]=(0,n.useState)(null),_=async()=>{if(!u.trim())return;b(!0),h(null);let e=await i.x.put("/api/v1/users/me",{full_name:u});if(b(!1),e.error){h(e.error||"Failed to update profile");return}let l=e.data;l&&s&&(o({...s,full_name:l.full_name},r||""),h("Profile updated"))},C=async()=>{if(k(null),!p||!v||v!==j){k("Please enter valid passwords and ensure they match.");return}let e=await i.x.post("/api/v1/users/me/change-password",{current_password:p,new_password:v});e.error?k(e.error):(k("Password updated successfully"),f(""),y(""),N(""))};return(0,l.jsx)(a.Z,{children:(0,l.jsxs)("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[(0,l.jsx)(t.Z,{}),(0,l.jsx)("div",{className:"flex-1 overflow-auto",children:(0,l.jsxs)("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Profile"}),(0,l.jsx)("p",{className:"mt-2 text-gray-600",children:"View your account details"})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow border border-gray-200 overflow-hidden",children:[(0,l.jsxs)("div",{className:"p-6 flex items-center gap-4 border-b border-gray-200",children:[(0,l.jsx)("div",{className:"w-14 h-14 rounded-full bg-blue-600 flex items-center justify-center text-white text-xl font-semibold",children:(null==s?void 0:null===(e=s.full_name)||void 0===e?void 0:e.charAt(0).toUpperCase())||"U"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-lg font-medium text-gray-900",children:(null==s?void 0:s.full_name)||"—"}),(0,l.jsx)("div",{className:"text-sm text-gray-500",children:(null==s?void 0:s.email)||"—"})]})]}),(0,l.jsxs)("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Full Name"}),(0,l.jsx)("input",{type:"text",value:u,onChange:e=>m(e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-600 focus:border-blue-600"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,l.jsx)("div",{className:"mt-1 px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-900",children:(null==s?void 0:s.email)||"—"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Role"}),(0,l.jsx)("div",{className:"mt-1 inline-flex items-center px-2 py-1 text-xs font-medium rounded bg-purple-100 text-purple-800",children:(null==s?void 0:s.role)||"—"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Organization"}),(0,l.jsx)("div",{className:"mt-1 px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-900",children:(null==c?void 0:c.name)||"—"})]})]}),(0,l.jsxs)("div",{className:"p-6 border-t border-gray-200 flex items-center justify-between",children:[(0,l.jsx)("div",{className:"text-sm text-gray-500",children:"Update your name. Email and role are managed by admins."}),(0,l.jsx)("button",{onClick:_,disabled:x||!u.trim(),className:"px-4 py-2 rounded-md text-white ".concat(x||!u.trim()?"bg-blue-300":"bg-blue-600 hover:bg-blue-700"),children:x?"Saving...":"Save Changes"})]}),g&&(0,l.jsx)("div",{className:"px-6 pb-6 text-sm text-green-700",children:g})]}),(0,l.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow border border-gray-200 overflow-hidden",children:[(0,l.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Security"}),(0,l.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Change your account password"})]}),(0,l.jsxs)("div",{className:"p-6 grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Current Password"}),(0,l.jsx)("input",{type:"password",value:p,onChange:e=>f(e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-600 focus:border-blue-600"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"New Password"}),(0,l.jsx)("input",{type:"password",value:v,onChange:e=>y(e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-600 focus:border-blue-600"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Confirm New Password"}),(0,l.jsx)("input",{type:"password",value:j,onChange:e=>N(e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-600 focus:border-blue-600"})]})]}),(0,l.jsxs)("div",{className:"p-6 pt-0 flex items-center justify-end gap-4",children:[w&&(0,l.jsx)("div",{className:"text-sm ".concat(w.includes("success")?"text-green-700":"text-red-700"),children:w}),(0,l.jsx)("button",{onClick:C,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Update Password"})]})]})]})})]})})}},4033:function(e,s,r){e.exports=r(5313)}},function(e){e.O(0,[311,67,971,458,744],function(){return e(e.s=69)}),_N_E=e.O()}]);