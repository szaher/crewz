(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[805],{7167:function(e,t,s){Promise.resolve().then(s.bind(s,5176))},5176:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var a=s(7437),r=s(2265),l=s(4033),o=s(9755),n=s(8563),d=s(6312);function i(){let e=(0,l.useRouter)(),[t,s]=(0,r.useState)([]),[i,c]=(0,r.useState)(!0),[x,m]=(0,r.useState)(null);(0,r.useEffect)(()=>{h()},[]);let h=async()=>{try{c(!0);let e=await d.x.get("/api/v1/flows");e.data&&s(e.data.flows||[])}catch(e){console.error("Failed to load flows:",e),m(e.message||"Failed to load flows")}finally{c(!1)}},u=async()=>{try{var t;let s=await d.x.post("/api/v1/flows",{name:"New Flow",description:"A new workflow",nodes:[],edges:[],tags:[]});console.log("Create flow response:",s);let a=(null===(t=s.data)||void 0===t?void 0:t.id)||s.id;a?(console.log("Redirecting to flow:",a),e.push("/flows/".concat(a))):(console.error("No flow ID in response:",s),alert("Flow created but no ID returned"))}catch(e){console.error("Failed to create flow:",e),alert("Failed to create flow: "+(e.message||"Unknown error"))}},g=async e=>{if(confirm("Are you sure you want to delete this flow?"))try{await d.x.delete("/api/v1/flows/".concat(e)),await h()}catch(e){console.error("Failed to delete flow:",e),alert("Failed to delete flow: "+(e.message||"Unknown error"))}};return i?(0,a.jsx)(o.Z,{children:(0,a.jsxs)("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[(0,a.jsx)(n.Z,{}),(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})]})}):(0,a.jsx)(o.Z,{children:(0,a.jsxs)("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[(0,a.jsx)(n.Z,{}),(0,a.jsx)("div",{className:"flex-1 overflow-auto",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Flows"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"Create and manage your AI workflow automations"})]}),(0,a.jsx)("button",{onClick:u,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"+ Create Flow"})]}),x&&(0,a.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-red-800",children:x})}),0===t.length?(0,a.jsxs)("div",{className:"text-center py-12 bg-white rounded-lg shadow",children:[(0,a.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No flows"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating a new flow."}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)("button",{onClick:u,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:"+ Create Flow"})})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(t=>(0,a.jsx)("div",{className:"bg-white rounded-lg shadow hover:shadow-lg transition-shadow border border-gray-200",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:t.name}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("active"===t.status?"bg-green-100 text-green-800":"draft"===t.status?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"),children:t.status})]}),(0,a.jsx)("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:t.description||"No description"}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mb-4",children:["Updated: ",new Date(t.updated_at).toLocaleDateString()]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>e.push("/flows/".concat(t.id)),className:"flex-1 px-3 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>g(t.id),className:"px-3 py-2 bg-red-100 text-red-700 text-sm rounded hover:bg-red-200 transition-colors",children:"Delete"})]})]})},t.id))})]})})]})})}},4033:function(e,t,s){e.exports=s(5313)}},function(e){e.O(0,[311,67,971,458,744],function(){return e(e.s=7167)}),_N_E=e.O()}]);