(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{54:function(e,t,s){Promise.resolve().then(s.bind(s,6939))},6939:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var r=s(7437),a=s(2265),l=s(9755),i=s(8563),o=s(4033),n=s(8541),d=s(88),c=s(1865),x=s(8110),m=s(2160);let u=m.Ry({name:m.Z_().min(1,"Flow name is required").max(100,"Flow name must be less than 100 characters"),description:m.Z_().max(500,"Description must be less than 500 characters").optional(),variables:m.IM(m.Z_(),m.Yj()).optional()});function b(e){let{initialData:t,onSubmit:s,onCancel:a,submitLabel:l="Submit",isSubmitting:i=!1}=e,{register:o,handleSubmit:n,formState:{errors:d,isDirty:m}}=(0,c.cI)({resolver:(0,x.F)(u),defaultValues:{name:(null==t?void 0:t.name)||"",description:(null==t?void 0:t.description)||"",variables:(null==t?void 0:t.variables)||{}}}),b=async e=>{try{await s(e)}catch(e){console.error("Form submission error:",e)}};return(0,r.jsxs)("form",{onSubmit:n(b),className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"flow-name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Name ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{id:"flow-name",type:"text",...o("name"),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(d.name?"border-red-300 bg-red-50":"border-gray-300"),placeholder:"e.g., Customer Onboarding Flow",autoFocus:!0,disabled:i,"aria-describedby":d.name?"name-error":void 0}),d.name&&(0,r.jsx)("p",{id:"name-error",className:"mt-1 text-sm text-red-600",role:"alert",children:d.name.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"flow-description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (optional)"}),(0,r.jsx)("textarea",{id:"flow-description",...o("description"),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(d.description?"border-red-300 bg-red-50":"border-gray-300"),placeholder:"Describe what this flow does...",rows:3,disabled:i,"aria-describedby":d.description?"description-error":void 0}),d.description&&(0,r.jsx)("p",{id:"description-error",className:"mt-1 text-sm text-red-600",role:"alert",children:d.description.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"flow-variables",className:"block text-sm font-medium text-gray-700 mb-1",children:"Initial Variables (optional)"}),(0,r.jsxs)("details",{className:"group",children:[(0,r.jsx)("summary",{className:"cursor-pointer text-sm text-blue-600 hover:text-blue-700 mb-2",children:"Advanced: Set initial variables"}),(0,r.jsx)("textarea",{id:"flow-variables",...o("variables",{setValueAs:e=>{if(null==e)return{};if("string"!=typeof e)return e;if(""===e.trim())return{};try{return JSON.parse(e)}catch(t){return e}}}),className:"w-full px-3 py-2 border rounded-lg font-mono text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(d.variables?"border-red-300 bg-red-50":"border-gray-300"),placeholder:'{"key": "value"}',rows:4,disabled:i,"aria-describedby":d.variables?"variables-error":void 0})]}),d.variables&&(0,r.jsx)("p",{id:"variables-error",className:"mt-1 text-sm text-red-600",role:"alert",children:d.variables.message})]}),(0,r.jsxs)("div",{className:"flex gap-3 justify-end pt-2",children:[a&&(0,r.jsx)("button",{type:"button",onClick:a,disabled:i,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),(0,r.jsxs)("button",{type:"submit",disabled:i,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[i&&(0,r.jsxs)("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),i?"Submitting...":l]})]})]})}function h(e){let{isOpen:t,onClose:s}=e,l=(0,o.useRouter)(),{createFlow:i}=(0,d.w)(),[n,c]=(0,a.useState)(!1),[x,m]=(0,a.useState)(null),u=async e=>{c(!0),m(null);try{var t;let r=await i({name:e.name.trim(),description:null===(t=e.description)||void 0===t?void 0:t.trim(),variables:e.variables||{}});l.push("/flows/".concat(r.id,"/edit")),s()}catch(e){throw m(e instanceof Error?e.message:"Failed to create flow"),console.error("Flow creation error:",e),e}finally{c(!1)}},h=()=>{m(null),s()};return t?(0,r.jsxs)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:h}),(0,r.jsx)("div",{className:"flex min-h-full items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"relative bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Create New Flow"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Create a workflow to orchestrate your AI agents"})]}),x&&(0,r.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,r.jsx)("p",{className:"text-sm text-red-600",children:x})}),(0,r.jsx)(b,{onSubmit:u,onCancel:h,submitLabel:"Create Flow",isSubmitting:n})]})})]}):null}function g(){let e=(0,o.useRouter)(),{flows:t}=(0,n.Ge)(),{executions:s}=(0,n.f0)(),{crews:l}=(0,n.eb)(),[i,d]=(0,a.useState)(!1),[c,x]=(0,a.useState)({totalFlows:0,totalCrews:0,totalExecutions:0,runningExecutions:0});(0,a.useEffect)(()=>{x({totalFlows:t.length,totalCrews:l.length,totalExecutions:s.length,runningExecutions:s.filter(e=>"running"===e.status).length})},[t,l,s]);let m=s.sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime()).slice(0,5),u=t.sort((e,t)=>new Date(t.updated_at||t.created_at).getTime()-new Date(e.updated_at||e.created_at).getTime()).slice(0,6);return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),(0,r.jsx)("p",{className:"text-gray-500 mt-1",children:"Welcome to your automation orchestration platform"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Total Flows"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:c.totalFlows})]}),(0,r.jsx)("div",{className:"text-4xl",children:"\uD83D\uDD00"})]}),(0,r.jsx)("button",{onClick:()=>e.push("/flows"),className:"mt-4 text-sm text-blue-600 hover:text-blue-700",children:"View all →"})]}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Total Crews"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:c.totalCrews})]}),(0,r.jsx)("div",{className:"text-4xl",children:"\uD83D\uDC65"})]}),(0,r.jsx)("button",{onClick:()=>e.push("/crews"),className:"mt-4 text-sm text-blue-600 hover:text-blue-700",children:"View all →"})]}),(0,r.jsx)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Total Executions"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:c.totalExecutions})]}),(0,r.jsx)("div",{className:"text-4xl",children:"⚙️"})]})}),(0,r.jsx)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Running Now"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-blue-600 mt-2",children:c.runningExecutions})]}),(0,r.jsx)("div",{className:"text-4xl",children:"▶️"})]})})]}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Quick Actions"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[(0,r.jsxs)("button",{onClick:()=>d(!0),className:"p-4 text-center border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors",children:[(0,r.jsx)("div",{className:"text-2xl mb-2",children:"\uD83D\uDD00"}),(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Create Flow"})]}),(0,r.jsxs)("button",{onClick:()=>e.push("/crews"),className:"p-4 text-center border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors",children:[(0,r.jsx)("div",{className:"text-2xl mb-2",children:"\uD83D\uDC65"}),(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Create Crew"})]}),(0,r.jsxs)("button",{onClick:()=>e.push("/tools"),className:"p-4 text-center border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors",children:[(0,r.jsx)("div",{className:"text-2xl mb-2",children:"\uD83D\uDD27"}),(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Add Tool"})]}),(0,r.jsxs)("button",{onClick:()=>e.push("/providers"),className:"p-4 text-center border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors",children:[(0,r.jsx)("div",{className:"text-2xl mb-2",children:"\uD83D\uDD0C"}),(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Add Provider"})]}),(0,r.jsxs)("button",{onClick:()=>e.push("/observability"),className:"p-4 text-center border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors",children:[(0,r.jsx)("div",{className:"text-2xl mb-2",children:"\uD83D\uDCC8"}),(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Observability"})]}),(0,r.jsxs)("button",{onClick:()=>e.push("/chat"),className:"p-4 text-center border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors",children:[(0,r.jsx)("div",{className:"text-2xl mb-2",children:"\uD83D\uDCAC"}),(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Start Chat"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Recent Flows"}),(0,r.jsx)("button",{onClick:()=>e.push("/flows"),className:"text-sm text-blue-600 hover:text-blue-700",children:"View all →"})]}),0===t.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"text-5xl mb-4",children:"\uD83D\uDD00"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No flows yet"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Create your first flow to get started"}),(0,r.jsx)("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Flow"})]}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map(t=>{var s,a;return(0,r.jsxs)("div",{onClick:()=>e.push("/flows/".concat(t.id)),className:"p-4 border border-gray-200 rounded-lg hover:shadow-md hover:border-blue-300 cursor-pointer transition-all",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900 truncate flex-1",children:t.name}),(0,r.jsx)("span",{className:"ml-2 px-2 py-1 text-xs font-medium rounded ".concat(t.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"),children:t.is_active?"Active":"Inactive"})]}),t.description&&(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:t.description}),(0,r.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,r.jsxs)("span",{children:[(null===(s=t.nodes)||void 0===s?void 0:s.length)||0," nodes"]}),(0,r.jsxs)("span",{children:[(null===(a=t.edges)||void 0===a?void 0:a.length)||0," connections"]})]}),(0,r.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-100 text-xs text-gray-500",children:["Updated ",new Date(t.updated_at||t.created_at).toLocaleDateString()]})]},t.id)})})]}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Recent Executions"}),(0,r.jsx)("button",{onClick:()=>e.push("/executions"),className:"text-sm text-blue-600 hover:text-blue-700",children:"View all →"})]}),0===m.length?(0,r.jsx)("p",{className:"text-sm text-gray-500 text-center py-8",children:"No executions yet"}):(0,r.jsx)("div",{className:"space-y-3",children:m.map(t=>(0,r.jsxs)("div",{onClick:()=>e.push("/executions/".concat(t.id)),className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["#",t.id]}),(0,r.jsx)("span",{className:"text-sm text-gray-500 capitalize",children:t.execution_type}),(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded ".concat("completed"===t.status?"bg-green-100 text-green-800":"running"===t.status?"bg-blue-100 text-blue-800":"failed"===t.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:t.status})]}),(0,r.jsx)("span",{className:"text-sm text-gray-500",children:new Date(t.created_at).toLocaleString()})]},t.id))})]}),(0,r.jsx)(h,{isOpen:i,onClose:()=>d(!1)})]})}var p=s(6312);function f(){let{setFlows:e}=(0,n.Ge)(),{setExecutions:t}=(0,n.f0)(),{setCrews:s}=(0,n.eb)(),{setAgents:o}=(0,n.EW)(),{setTools:d}=(0,n.nL)(),[c,x]=(0,a.useState)(!0),m=(0,a.useCallback)(async()=>{x(!0);try{let[r,a,l,i,n]=await Promise.all([p.x.get("/api/v1/flows"),p.x.get("/api/v1/crews"),p.x.get("/api/v1/agents"),p.x.get("/api/v1/tools"),p.x.get("/api/v1/executions")]);r.data&&e(r.data.flows||[]),a.data&&s(a.data.crews||[]),l.data&&o(l.data.agents||[]),i.data&&d(i.data.tools||[]),n.data&&t(n.data.executions||[])}catch(e){console.error("Failed to load dashboard data:",e)}finally{x(!1)}},[o,s,t,e,d]);return(0,a.useEffect)(()=>{m()},[m]),(0,r.jsx)(l.Z,{children:(0,r.jsxs)("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[(0,r.jsx)(i.Z,{}),(0,r.jsx)("div",{className:"flex-1 overflow-auto",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto p-6",children:c?(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,r.jsx)(g,{})})})]})})}},88:function(e,t,s){"use strict";s.d(t,{w:function(){return l}});var r=s(2265),a=s(6312);function l(){let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)(!0),[i,o]=(0,r.useState)(null),n=(0,r.useCallback)(async()=>{l(!0),o(null);try{var e;let s=await a.x.get("/api/v1/flows");if(s.error)throw Error(s.error);t((null===(e=s.data)||void 0===e?void 0:e.flows)||[])}catch(e){o(e instanceof Error?e.message:"Failed to fetch flows"),console.error("Failed to fetch flows:",e)}finally{l(!1)}},[]),d=async e=>{let s=await a.x.post("/api/v1/flows",e);if(s.error)throw Error(s.error);let r=s.data;return t(e=>[...e,r]),r},c=async(e,s)=>{let r=await a.x.put("/api/v1/flows/".concat(e),s);if(r.error)throw Error(r.error);let l=r.data;return t(t=>t.map(t=>t.id===e?l:t)),l},x=async e=>{let s=await a.x.delete("/api/v1/flows/".concat(e));if(s.error)throw Error(s.error);t(t=>t.filter(t=>t.id!==e))},m=async e=>{let t=await a.x.get("/api/v1/flows/".concat(e));if(t.error)throw Error(t.error);return t.data};return(0,r.useEffect)(()=>{n()},[n]),{flows:e,loading:s,error:i,createFlow:d,updateFlow:c,deleteFlow:x,getFlow:m,refetch:n}}}},function(e){e.O(0,[311,144,67,971,458,744],function(){return e(e.s=54)}),_N_E=e.O()}]);