(()=>{var e={};e.id=418,e.ids=[418],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1239:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>d,routeModule:()=>u,tree:()=>c});var r=s(482),a=s(9108),l=s(2563),n=s.n(l),i=s(8300),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let c=["",{children:["crews",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1089)),"/Users/blackghost/go/src/github.com/szaher/crewzx/crewz/frontend/src/app/crews/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,8853)),"/Users/blackghost/go/src/github.com/szaher/crewzx/crewz/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/blackghost/go/src/github.com/szaher/crewzx/crewz/frontend/src/app/crews/page.tsx"],x="/crews/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/crews/page",pathname:"/crews",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},654:(e,t,s)=>{Promise.resolve().then(s.bind(s,8701))},8701:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var r=s(2295),a=s(3729),l=s(2254),n=s(4418),i=s(8955),o=s(5945),c=s(6224);function d(){let[e,t]=(0,a.useState)([]),[s,r]=(0,a.useState)(!0),[l,n]=(0,a.useState)(null),i=(0,a.useCallback)(async()=>{r(!0),n(null);try{let e=await c.x.get("/api/v1/crews");if(e.error)throw Error(e.error);t(e.data?.crews||[])}catch(e){n(e instanceof Error?e.message:"Failed to fetch crews"),console.error("Failed to fetch crews:",e)}finally{r(!1)}},[]),o=async e=>{let s=await c.x.post("/api/v1/crews",e);if(s.error)throw Error(s.error);let r=s.data;return t(e=>[...e,r]),r},d=async(e,s)=>{let r=await c.x.put(`/api/v1/crews/${e}`,s);if(r.error)throw Error(r.error);let a=r.data;return t(t=>t.map(t=>t.id===e?a:t)),a},x=async e=>{let s=await c.x.delete(`/api/v1/crews/${e}`);if(s.error)throw Error(s.error);t(t=>t.filter(t=>t.id!==e))},m=async e=>{let t=await c.x.get(`/api/v1/crews/${e}`);if(t.error)throw Error(t.error);return t.data};return(0,a.useEffect)(()=>{i()},[i]),{crews:e,loading:s,error:l,createCrew:o,updateCrew:d,deleteCrew:x,getCrew:m,refetch:i}}var x=s(7464);function m({agent:e,selected:t,onToggle:s}){return(0,r.jsxs)("div",{onClick:s,className:`
        p-4 rounded-lg border-2 cursor-pointer transition-all
        ${t?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300"}
      `,children:[r.jsx("div",{className:"flex items-start justify-between",children:(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("h4",{className:"font-medium text-gray-900",children:e.name}),t&&r.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})]}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.role}),e.goal&&r.jsx("p",{className:"text-xs text-gray-500 mt-2 line-clamp-2",children:e.goal})]})}),(0,r.jsxs)("div",{className:"mt-3 flex items-center gap-2",children:[r.jsx("span",{className:`
          px-2 py-1 text-xs font-medium rounded
          ${e.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}
        `,children:e.is_active?"Active":"Inactive"}),e.tools&&e.tools.length>0&&(0,r.jsxs)("span",{className:"px-2 py-1 text-xs font-medium rounded bg-purple-100 text-purple-800",children:[e.tools.length," tool",1!==e.tools.length?"s":""]})]})]})}function u({crewId:e,onSave:t}){let{crews:s,createCrew:l,updateCrew:n,getCrew:i}=d(),{agents:o}=(0,x.EW)(),c=e?s.find(t=>t.id===e):null,[u,g]=(0,a.useState)({name:c?.name||"",description:c?.description||"",process_type:c?.process_type||"sequential",agent_ids:c?.agent_ids||[],task_delegation_enabled:c?.task_delegation_enabled??!0,verbose:c?.verbose??!1,config:c?.config||{}}),[p,h]=(0,a.useState)(c?.agent_ids||[]),[b,f]=(0,a.useState)(!1),[y,j]=(0,a.useState)(null);(0,a.useEffect)(()=>{c&&(g({name:c.name,description:c.description,process_type:c.process_type,agent_ids:c.agent_ids,task_delegation_enabled:c.task_delegation_enabled,verbose:c.verbose,config:c.config}),h(c.agent_ids))},[c]);let v=e=>{let t=p.includes(e)?p.filter(t=>t!==e):[...p,e];h(t),g({...u,agent_ids:t})},w=async s=>{if(s.preventDefault(),j(null),0===u.agent_ids.length){j("Please select at least one agent");return}f(!0);try{if(e){let s=await n(e,u);t?.(s.id)}else{let e=await l(u);t?.(e.id)}}catch(e){j(e instanceof Error?e.message:"Failed to save crew")}finally{f(!1)}};return(0,r.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:e?"Edit Crew":"Create New Crew"}),(0,r.jsxs)("form",{onSubmit:w,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Crew Name"}),r.jsx("input",{id:"name",type:"text",required:!0,value:u.name,onChange:e=>g({...u,name:e.target.value}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-blue-500",placeholder:"e.g., Research Team"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),r.jsx("textarea",{id:"description",rows:3,value:u.description,onChange:e=>g({...u,description:e.target.value}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-blue-500",placeholder:"What does this crew do?"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"process_type",className:"block text-sm font-medium text-gray-700",children:"Collaboration Pattern"}),(0,r.jsxs)("select",{id:"process_type",value:u.process_type,onChange:e=>g({...u,process_type:e.target.value}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-blue-500",children:[r.jsx("option",{value:"sequential",children:"Sequential (agents work in order)"}),r.jsx("option",{value:"hierarchical",children:"Hierarchical (manager assigns tasks)"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:u.task_delegation_enabled,onChange:e=>g({...u,task_delegation_enabled:e.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),r.jsx("span",{className:"text-sm text-gray-700",children:"Enable task delegation"})]}),(0,r.jsxs)("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:u.verbose,onChange:e=>g({...u,verbose:e.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),r.jsx("span",{className:"text-sm text-gray-700",children:"Verbose logging"})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Select Agents (",p.length," selected)"]}),0===o.length?r.jsx("p",{className:"text-sm text-gray-500",children:"No agents available. Create agents first."}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.map(e=>r.jsx(m,{agent:e,selected:p.includes(e.id),onToggle:()=>v(e.id)},e.id))})]}),y&&r.jsx("div",{className:"rounded-md bg-red-50 p-4",children:r.jsx("p",{className:"text-sm text-red-800",children:y})}),(0,r.jsxs)("div",{className:"flex justify-end gap-3",children:[r.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:b,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:b?"Saving...":e?"Update Crew":"Create Crew"})]})]})]})}function g(){let e=(0,l.useRouter)(),{crews:t,loading:s,error:c,refetch:x}=d(),m=(0,l.useSearchParams)(),[g,p]=(0,a.useState)(!1),[h,b]=(0,a.useState)(),f=()=>{x()},y=m?.get("manager_llm_provider_id");(0,a.useEffect)(()=>{},[y]);let j=()=>{b(void 0),p(!0)},v=e=>{b(e),p(!0)};return g?r.jsx(n.Z,{children:(0,r.jsxs)("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(i.Z,{}),(0,r.jsxs)("div",{className:"flex-1 overflow-auto",children:[r.jsx("div",{className:"p-6",children:r.jsx(o.Z,{})}),r.jsx(u,{crewId:h,onSave:e=>{p(!1),f()}})]})]})}):r.jsx(n.Z,{children:(0,r.jsxs)("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsx(i.Z,{}),r.jsx("div",{className:"flex-1 overflow-auto",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto p-6",children:[r.jsx(o.Z,{}),(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Crews"}),r.jsx("div",{className:"flex gap-2",children:r.jsx("button",{onClick:j,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Create Crew"})})]}),y&&(0,r.jsxs)("div",{className:"mb-4 flex items-center gap-3",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Active filter:"}),(0,r.jsxs)("span",{className:"inline-flex items-center gap-2 text-xs bg-purple-50 text-purple-700 border border-purple-200 px-2 py-1 rounded",children:["Crews \xb7 manager provider #",y,r.jsx("button",{onClick:()=>{e.push("/crews")},className:"ml-1 text-purple-700 hover:text-purple-900","aria-label":"Clear filter",title:"Clear filter",children:"✕"})]})]}),c?r.jsx("div",{className:"flex flex-col items-center justify-center py-12",children:(0,r.jsxs)("div",{className:"text-center max-w-md",children:[(0,r.jsxs)("p",{className:"text-red-600 mb-4",children:["Failed to load data: ",c]}),r.jsx("button",{onClick:f,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Retry"})]})}):s?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):0===t.length?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[r.jsx("p",{className:"text-gray-500 mb-4",children:"No crews yet. Create your first crew to get started."}),r.jsx("button",{onClick:j,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Create Crew"})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(y?t.filter(e=>e.manager_llm_provider_id===Number(y)):t).map(e=>(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200 hover:shadow-lg transition-shadow",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),r.jsx("p",{className:"text-sm text-gray-600 mt-2",children:e.description}),(0,r.jsxs)("div",{className:"mt-4 flex items-center gap-2",children:[r.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded bg-purple-100 text-purple-800",children:e.process_type}),(0,r.jsxs)("span",{className:"px-2 py-1 text-xs font-medium rounded bg-blue-100 text-blue-800",children:[e.agent_ids.length," agent",1!==e.agent_ids.length?"s":""]})]}),r.jsx("button",{onClick:()=>v(e.id),className:"mt-4 w-full px-4 py-2 text-sm font-medium text-blue-600 bg-blue-50 rounded-md hover:bg-blue-100",children:"Edit Crew"})]},e.id))})]})})]})})}},1089:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>a,default:()=>n});let r=(0,s(6843).createProxy)(String.raw`/Users/blackghost/go/src/github.com/szaher/crewzx/crewz/frontend/src/app/crews/page.tsx`),{__esModule:a,$$typeof:l}=r,n=r.default}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[572,774,297,12],()=>s(1239));module.exports=r})();