(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{2822:function(e,t,n){Promise.resolve().then(n.bind(n,8785))},8785:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var s=n(7437),r=n(1396),o=n.n(r),l=n(4033),a=n(2265),i=n(6312),u=n(8541);function c(){let e=(0,l.useRouter)(),t=(0,u.tN)(e=>e.setAuth),[n,r]=(0,a.useState)({email:"",password:""}),[o,c]=(0,a.useState)(null),[d,h]=(0,a.useState)(!1),m=async s=>{s.preventDefault(),c(null),h(!0);try{let s=await i.x.post("/api/v1/auth/login",n);if(s.error){c(s.error);return}if(s.data){let r={id:s.data.user_id,tenant_id:s.data.tenant_id,email:n.email,role:s.data.role};t(r,s.data.access_token),i.x.setToken(s.data.access_token),e.push("/dashboard")}}catch(e){c(e instanceof Error?e.message:"Login failed")}finally{h(!1)}};return(0,s.jsxs)("form",{onSubmit:m,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,s.jsx)("input",{id:"email",type:"email",required:!0,value:n.email,onChange:e=>r({...n,email:e.target.value}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500",disabled:d})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,s.jsx)("input",{id:"password",type:"password",required:!0,value:n.password,onChange:e=>r({...n,password:e.target.value}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500",disabled:d})]}),o&&(0,s.jsx)("div",{className:"rounded-md bg-red-50 p-4",children:(0,s.jsx)("p",{className:"text-sm text-red-800",children:o})}),(0,s.jsx)("button",{type:"submit",disabled:d,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Signing in...":"Sign in"})]})}function d(){let e=(0,l.useSearchParams)().get("reason");return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to your account"}),(0,s.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",(0,s.jsx)(o(),{href:"/register",className:"font-medium text-blue-600 hover:text-blue-500",children:"create a new account"})]})]}),"session_expired"===e&&(0,s.jsx)("div",{className:"rounded-md bg-yellow-50 p-4",children:(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-yellow-800",children:"Session Expired"}),(0,s.jsx)("div",{className:"mt-2 text-sm text-yellow-700",children:(0,s.jsx)("p",{children:"Your session has expired. Please sign in again to continue."})})]})]})}),(0,s.jsx)("div",{className:"mt-8 bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:(0,s.jsx)(c,{})})]})})}},6312:function(e,t,n){"use strict";n.d(t,{x:function(){return l}});let s="http://localhost:8000",r="http://localhost:8000";{let e="".concat(window.location.protocol,"//").concat(window.location.hostname,":8000");s=r&&!/^(https?:\/\/)?(localhost|127\.0\.0\.1)(:|$)/i.test(r)?r:e}class o{setUnauthorizedHandler(e){this.onUnauthorized=e}setToken(e){this.token=e,localStorage.setItem("access_token",e)}clearToken(){this.token=null,localStorage.removeItem("access_token")}getToken(){return this.token}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{method:n="GET",body:s,headers:r={},skipAuth:o=!1}=t,l="".concat(this.baseUrl).concat(e),a={"Content-Type":"application/json",...r};!o&&this.token&&(a.Authorization="Bearer ".concat(this.token));let i={method:n,headers:a};s&&"GET"!==n&&(i.body=JSON.stringify(s));try{let e=await fetch(l,i),t=e.headers.get("content-type")||"",n=204===e.status||205===e.status||"0"===e.headers.get("content-length"),s=null;if(!n){if(t.includes("application/json"))try{s=await e.json()}catch(e){s=null}else try{s=await e.text()||null}catch(e){s=null}}if(!e.ok)return 401===e.status&&!o&&(this.clearToken(),this.onUnauthorized&&this.onUnauthorized()),{error:"string"==typeof s&&s||(null==s?void 0:s.detail)||(null==s?void 0:s.message)||"Request failed",status:e.status};return{data:s,status:e.status}}catch(e){return{error:e instanceof Error?e.message:"Network error",status:0}}}async get(e,t){return this.request(e,{...t,method:"GET"})}async post(e,t,n){return this.request(e,{...n,method:"POST",body:t})}async put(e,t,n){return this.request(e,{...n,method:"PUT",body:t})}async delete(e,t){return this.request(e,{...t,method:"DELETE"})}constructor(e=s){this.token=null,this.onUnauthorized=null,this.baseUrl=e,this.token=localStorage.getItem("access_token")}}let l=new o},8541:function(e,t,n){"use strict";n.d(t,{EW:function(){return i},Ge:function(){return a},HB:function(){return h},eb:function(){return u},f0:function(){return d},nL:function(){return c},qT:function(){return l},tN:function(){return o}});var s=n(4738),r=n(4810);let o=(0,s.Ue)()((0,r.tJ)(e=>({user:null,token:null,isAuthenticated:!1,setAuth:(t,n)=>e({user:t,token:n,isAuthenticated:!0}),clearAuth:()=>e({user:null,token:null,isAuthenticated:!1})}),{name:"auth-storage"})),l=(0,s.Ue)()((0,r.tJ)(e=>({currentTenant:null,setTenant:t=>e({currentTenant:t}),clearTenant:()=>e({currentTenant:null})}),{name:"tenant-storage"})),a=(0,s.Ue)(e=>({flows:[],currentFlow:null,setFlows:t=>e({flows:t}),setCurrentFlow:t=>e({currentFlow:t}),addFlow:t=>e(e=>({flows:[...e.flows,t]})),updateFlow:(t,n)=>e(e=>{var s;return{flows:e.flows.map(e=>e.id===t?{...e,...n}:e),currentFlow:(null===(s=e.currentFlow)||void 0===s?void 0:s.id)===t?{...e.currentFlow,...n}:e.currentFlow}}),deleteFlow:t=>e(e=>{var n;return{flows:e.flows.filter(e=>e.id!==t),currentFlow:(null===(n=e.currentFlow)||void 0===n?void 0:n.id)===t?null:e.currentFlow}})})),i=(0,s.Ue)(e=>({agents:[],setAgents:t=>e({agents:t}),addAgent:t=>e(e=>({agents:[...e.agents,t]})),updateAgent:(t,n)=>e(e=>({agents:e.agents.map(e=>e.id===t?{...e,...n}:e)})),deleteAgent:t=>e(e=>({agents:e.agents.filter(e=>e.id!==t)}))})),u=(0,s.Ue)(e=>({crews:[],setCrews:t=>e({crews:t}),addCrew:t=>e(e=>({crews:[...e.crews,t]})),updateCrew:(t,n)=>e(e=>({crews:e.crews.map(e=>e.id===t?{...e,...n}:e)})),deleteCrew:t=>e(e=>({crews:e.crews.filter(e=>e.id!==t)}))})),c=(0,s.Ue)(e=>({tools:[],setTools:t=>e({tools:t}),addTool:t=>e(e=>({tools:[...e.tools,t]})),updateTool:(t,n)=>e(e=>({tools:e.tools.map(e=>e.id===t?{...e,...n}:e)})),deleteTool:t=>e(e=>({tools:e.tools.filter(e=>e.id!==t)}))})),d=(0,s.Ue)(e=>({executions:[],currentExecution:null,setExecutions:t=>e({executions:t}),setCurrentExecution:t=>e({currentExecution:t}),addExecution:t=>e(e=>({executions:[...e.executions,t]})),updateExecution:(t,n)=>e(e=>{var s;return{executions:e.executions.map(e=>e.id===t?{...e,...n}:e),currentExecution:(null===(s=e.currentExecution)||void 0===s?void 0:s.id)===t?{...e.currentExecution,...n}:e.currentExecution}})})),h=(0,s.Ue)()((0,r.tJ)(e=>({sidebarOpen:!0,theme:"system",toggleSidebar:()=>e(e=>({sidebarOpen:!e.sidebarOpen})),setTheme:t=>e({theme:t})}),{name:"ui-storage"}))},1396:function(e,t,n){e.exports=n(5250)}},function(e){e.O(0,[311,279,971,458,744],function(){return e(e.s=2822)}),_N_E=e.O()}]);