(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[266],{7576:function(e,t,r){Promise.resolve().then(r.bind(r,5386))},5386:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var s=r(7437),a=r(2265),n=r(4033),c=r(9755),l=r(8563),o=r(9222);function i(e){let{execution:t}=e;return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold text-gray-900",children:["Execution #",t.id]}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Type: ",(0,s.jsx)("span",{className:"capitalize",children:t.execution_type})]})]}),(0,s.jsx)("span",{className:"px-3 py-1 text-sm font-medium rounded border ".concat((e=>{switch(e){case"completed":return"bg-green-100 text-green-800 border-green-200";case"running":return"bg-blue-100 text-blue-800 border-blue-200";case"failed":return"bg-red-100 text-red-800 border-red-200";case"cancelled":default:return"bg-gray-100 text-gray-800 border-gray-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200"}})(t.status)),children:t.status})]}),(0,s.jsxs)("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 uppercase",children:"Started"}),(0,s.jsx)("p",{className:"mt-1 text-sm font-medium text-gray-900",children:t.started_at?new Date(t.started_at).toLocaleString():"Not started"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 uppercase",children:"Completed"}),(0,s.jsx)("p",{className:"mt-1 text-sm font-medium text-gray-900",children:t.completed_at?new Date(t.completed_at).toLocaleString():"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 uppercase",children:"Duration"}),(0,s.jsx)("p",{className:"mt-1 text-sm font-medium text-gray-900",children:t.started_at&&t.completed_at?"".concat(Math.round((new Date(t.completed_at).getTime()-new Date(t.started_at).getTime())/1e3),"s"):"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 uppercase",children:"Created"}),(0,s.jsx)("p",{className:"mt-1 text-sm font-medium text-gray-900",children:new Date(t.created_at).toLocaleString()})]})]})]}),t.input_data&&Object.keys(t.input_data).length>0&&(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Input Data"}),(0,s.jsx)("pre",{className:"bg-gray-50 rounded p-4 overflow-x-auto text-sm",children:JSON.stringify(t.input_data,null,2)})]}),t.output_data&&Object.keys(t.output_data).length>0&&(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Output Data"}),(0,s.jsx)("pre",{className:"bg-gray-50 rounded p-4 overflow-x-auto text-sm",children:JSON.stringify(t.output_data,null,2)})]}),t.error&&(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-red-900 mb-2",children:"Error"}),(0,s.jsx)("p",{className:"text-sm text-red-800",children:t.error})]})]})}class d{connect(e,t,r,s){let a="".concat(this.baseUrl,"/api/v1/executions/").concat(e,"/stream");return this.eventSource=new EventSource(a),this.eventSource.onmessage=e=>{try{let t=JSON.parse(e.data);r(t)}catch(e){console.error("Failed to parse SSE event:",e)}},this.eventSource.onerror=e=>{console.error("SSE error:",e),s&&s(e),this.disconnect()},this}disconnect(){this.eventSource&&(this.eventSource.close(),this.eventSource=null)}isConnected(){return null!==this.eventSource&&this.eventSource.readyState===EventSource.OPEN}constructor(e="http://localhost:8000"){this.eventSource=null,this.baseUrl=e}}var u=r(8541);function x(e){let{executionId:t}=e,{token:r}=(0,u.tN)(),[n,c]=(0,a.useState)([]),[l,o]=(0,a.useState)(!1),i=(0,a.useRef)(null),x=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(!r)return;let e=new d;return x.current=e,e.connect(t,r,e=>{c(t=>[...t,e]),o(!0)},e=>{console.error("SSE error:",e),o(!1)}),()=>{e.disconnect()}},[t,r]),(0,a.useEffect)(()=>{var e;null===(e=i.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[n]);let m=e=>{switch(e){case"connected":return"\uD83D\uDD17";case"execution_started":return"▶️";case"node_started":return"⚙️";case"node_completed":return"✅";case"node_failed":return"❌";case"execution_completed":return"\uD83C\uDF89";case"execution_failed":return"\uD83D\uDCA5";case"execution_cancelled":return"\uD83D\uDED1";case"error":return"⚠️";default:return"\uD83D\uDCDD"}},h=e=>{switch(e){case"execution_completed":case"node_completed":return"text-green-800 bg-green-50 border-green-200";case"execution_failed":case"node_failed":case"error":return"text-red-800 bg-red-50 border-red-200";case"execution_started":case"node_started":return"text-blue-800 bg-blue-50 border-blue-200";case"execution_cancelled":return"text-gray-800 bg-gray-50 border-gray-200";default:return"text-gray-800 bg-white border-gray-200"}};return(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200",children:[(0,s.jsxs)("div",{className:"border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Live Execution Logs"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(l?"bg-green-500":"bg-gray-300")}),(0,s.jsx)("span",{className:"text-sm text-gray-500",children:l?"Connected":"Disconnected"})]})]}),(0,s.jsxs)("div",{className:"p-6 max-h-96 overflow-y-auto space-y-2",children:[0===n.length?(0,s.jsx)("p",{className:"text-sm text-gray-500 text-center py-8",children:"Waiting for execution events..."}):n.map((e,t)=>(0,s.jsx)("div",{className:"p-3 rounded border ".concat(h(e.type)),children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("span",{className:"text-lg",children:m(e.type)}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("p",{className:"text-sm font-medium capitalize",children:e.type.replace(/_/g," ")}),e.timestamp&&(0,s.jsx)("span",{className:"text-xs opacity-75",children:new Date(e.timestamp).toLocaleTimeString()})]}),e.node_id&&(0,s.jsxs)("p",{className:"text-xs mt-1 opacity-75",children:["Node: ",e.node_id," ",e.node_type&&"(".concat(e.node_type,")")]}),e.error&&(0,s.jsx)("p",{className:"text-sm mt-2 font-mono",children:e.error}),e.output&&(0,s.jsx)("pre",{className:"text-xs mt-2 overflow-x-auto",children:JSON.stringify(e.output,null,2)})]})]})},t)),(0,s.jsx)("div",{ref:i})]})]})}var m=r(479);function h(){let e=(0,n.useParams)(),t=(0,n.useRouter)(),r=Number(e.id),{getExecution:d,cancelExecution:u}=(0,m.r)(),[h,g]=(0,a.useState)(null),[p,f]=(0,a.useState)(!0),[b,y]=(0,a.useState)(null),[v,j]=(0,a.useState)(!1),N=(0,a.useCallback)(async()=>{f(!0),y(null);try{let e=await d(r);g(e)}catch(e){y(e instanceof Error?e.message:"Failed to load execution"),console.error("Failed to load execution:",e)}finally{f(!1)}},[r,d]);(0,a.useEffect)(()=>{N()},[N]);let w=async()=>{if(h&&"running"===h.status){j(!0);try{await u(r),await N()}catch(e){console.error("Failed to cancel execution:",e)}finally{j(!1)}}};return p?(0,s.jsx)(c.Z,{children:(0,s.jsxs)("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[(0,s.jsx)(l.Z,{}),(0,s.jsx)("div",{className:"flex-1 overflow-auto",children:(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})})]})}):!b&&(p||h)?(0,s.jsx)(c.Z,{children:(0,s.jsxs)("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[(0,s.jsx)(l.Z,{}),(0,s.jsx)("div",{className:"flex-1 overflow-auto",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto p-6",children:[(0,s.jsx)(o.Z,{}),(0,s.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,s.jsx)("button",{onClick:()=>t.back(),className:"text-gray-600 hover:text-gray-900 flex items-center gap-2",children:"← Back"}),"running"===h.status&&(0,s.jsx)("button",{onClick:w,disabled:v,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 disabled:opacity-50",children:v?"Cancelling...":"Cancel Execution"})]}),(0,s.jsx)(i,{execution:h}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)(x,{executionId:r})})]})})]})}):(0,s.jsx)(c.Z,{children:(0,s.jsxs)("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[(0,s.jsx)(l.Z,{}),(0,s.jsx)("div",{className:"flex-1 overflow-auto",children:(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center max-w-md",children:[(0,s.jsx)("div",{className:"text-5xl mb-4",children:"⚠️"}),(0,s.jsx)("p",{className:"text-red-600 mb-4",children:b||"Execution not found"}),(0,s.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,s.jsx)("button",{onClick:()=>N(),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Retry"}),(0,s.jsx)("button",{onClick:()=>t.push("/executions"),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Go to Executions"})]})]})})})]})})}},9222:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var s=r(7437),a=r(1396),n=r.n(a),c=r(4033),l=r(2265);let o={"/dashboard":"Dashboard","/flows":"Flows","/crews":"Crews","/agents":"Agents","/tools":"Tools","/observability":"Observability","/chat":"Chat","/executions":"Executions","/settings":"Settings","/profile":"Profile"};function i(){let{breadcrumbs:e}=function(){let e=(0,c.usePathname)(),t=(0,l.useMemo)(()=>{if(!e)return[];let t=e.split("/").filter(Boolean),r=[];r.push({label:"Home",href:"/dashboard",isActive:"/dashboard"===e});let s="";return t.forEach((e,a)=>{s+="/".concat(e);let n=a===t.length-1;if(!isNaN(Number(e)))return;if("edit"===e){r.push({label:"Edit",href:s,isActive:n});return}let c=o[s]||e.charAt(0).toUpperCase()+e.slice(1);r.push({label:c,href:s,isActive:n})}),r},[e]),r=(0,l.useMemo)(()=>{if(!e)return"Home";let r=t[t.length-1];return(null==r?void 0:r.label)||"Home"},[e,t]);return{breadcrumbs:t,currentPage:r,pathname:e,isActive:t=>null==e?void 0:e.startsWith(t)}}();return e.length<=1?null:(0,s.jsx)("nav",{"aria-label":"Breadcrumb",className:"mb-4",children:(0,s.jsx)("ol",{className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-400",children:e.map((e,t)=>(0,s.jsxs)("li",{className:"flex items-center",children:[t>0&&(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-400 dark:text-gray-500 mx-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),e.isActive?(0,s.jsx)("span",{className:"text-gray-900 dark:text-gray-100 font-medium","aria-current":"page",children:e.label}):(0,s.jsx)(n(),{href:e.href,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors",children:e.label})]},e.href))})})}},479:function(e,t,r){"use strict";r.d(t,{r:function(){return n}});var s=r(2265),a=r(6312);function n(){let[e,t]=(0,s.useState)([]),[r,n]=(0,s.useState)(!0),[c,l]=(0,s.useState)(null),o=(0,s.useCallback)(async()=>{n(!0),l(null);try{var e;let r=await a.x.get("/api/v1/executions");if(r.error)throw Error(r.error);t((null===(e=r.data)||void 0===e?void 0:e.executions)||[])}catch(e){l(e instanceof Error?e.message:"Failed to fetch executions"),console.error("Failed to fetch executions:",e)}finally{n(!1)}},[]),i=async e=>{let t=await a.x.get("/api/v1/executions/".concat(e));if(t.error)throw Error(t.error);return t.data},d=async e=>{let t=await a.x.get("/api/v1/executions/".concat(e,"/details"));if(t.error)throw Error(t.error);return t.data},u=async e=>{var t;let r=await a.x.get("/api/v1/executions/".concat(e,"/logs"));if(r.error)throw Error(r.error);return(null===(t=r.data)||void 0===t?void 0:t.logs)||[]},x=async e=>{let r=await a.x.post("/api/v1/executions/".concat(e,"/cancel"),{});if(r.error)throw Error(r.error);t(t=>t.map(t=>t.id===e?{...t,status:"cancelled"}:t))},m=async(e,r)=>{let s=await a.x.post("/api/v1/flows/".concat(e,"/execute"),{inputs:r});if(s.error)throw Error(s.error);let n=s.data;return t(e=>[n,...e]),n};return(0,s.useEffect)(()=>{o()},[o]),{executions:e,loading:r,error:c,getExecution:i,getExecutionDetails:d,getExecutionLogs:u,cancelExecution:x,executeFlow:m,streamExecutionLogs:(e,t,r)=>{let s=new EventSource("".concat(a.x.baseURL,"/api/v1/executions/").concat(e,"/logs/stream"));return s.onmessage=e=>{try{let r=JSON.parse(e.data);t(r)}catch(e){console.error("Failed to parse log event:",e)}},s.onerror=e=>{console.error("EventSource error:",e),null==r||r(Error("Log stream error")),s.close()},()=>{s.close()}},refetch:o}}},1396:function(e,t,r){e.exports=r(5250)}},function(e){e.O(0,[311,279,67,971,458,744],function(){return e(e.s=7576)}),_N_E=e.O()}]);