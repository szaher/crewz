(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[418],{4217:function(e,t,s){Promise.resolve().then(s.bind(s,7675))},7675:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var r=s(7437),a=s(2265),l=s(4033),n=s(9755),i=s(8563),d=s(9222),o=s(6312);function c(){let[e,t]=(0,a.useState)([]),[s,r]=(0,a.useState)(!0),[l,n]=(0,a.useState)(null),i=(0,a.useCallback)(async()=>{r(!0),n(null);try{var e;let s=await o.x.get("/api/v1/crews");if(s.error)throw Error(s.error);t((null===(e=s.data)||void 0===e?void 0:e.crews)||[])}catch(e){n(e instanceof Error?e.message:"Failed to fetch crews"),console.error("Failed to fetch crews:",e)}finally{r(!1)}},[]),d=async e=>{let s=await o.x.post("/api/v1/crews",e);if(s.error)throw Error(s.error);let r=s.data;return t(e=>[...e,r]),r},c=async(e,s)=>{let r=await o.x.put("/api/v1/crews/".concat(e),s);if(r.error)throw Error(r.error);let a=r.data;return t(t=>t.map(t=>t.id===e?a:t)),a},x=async e=>{let s=await o.x.delete("/api/v1/crews/".concat(e));if(s.error)throw Error(s.error);t(t=>t.filter(t=>t.id!==e))},u=async e=>{let t=await o.x.get("/api/v1/crews/".concat(e));if(t.error)throw Error(t.error);return t.data};return(0,a.useEffect)(()=>{i()},[i]),{crews:e,loading:s,error:l,createCrew:d,updateCrew:c,deleteCrew:x,getCrew:u,refetch:i}}var x=s(8541);function u(e){let{agent:t,selected:s,onToggle:a}=e;return(0,r.jsxs)("div",{onClick:a,className:"\n        p-4 rounded-lg border-2 cursor-pointer transition-all\n        ".concat(s?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300","\n      "),children:[(0,r.jsx)("div",{className:"flex items-start justify-between",children:(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:t.name}),s&&(0,r.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:t.role}),t.goal&&(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-2 line-clamp-2",children:t.goal})]})}),(0,r.jsxs)("div",{className:"mt-3 flex items-center gap-2",children:[(0,r.jsx)("span",{className:"\n          px-2 py-1 text-xs font-medium rounded\n          ".concat(t.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800","\n        "),children:t.is_active?"Active":"Inactive"}),t.tools&&t.tools.length>0&&(0,r.jsxs)("span",{className:"px-2 py-1 text-xs font-medium rounded bg-purple-100 text-purple-800",children:[t.tools.length," tool",1!==t.tools.length?"s":""]})]})]})}function m(e){var t,s;let{crewId:l,onSave:n}=e,{crews:i,createCrew:d,updateCrew:o,getCrew:m}=c(),{agents:g}=(0,x.EW)(),h=l?i.find(e=>e.id===l):null,[p,b]=(0,a.useState)({name:(null==h?void 0:h.name)||"",description:(null==h?void 0:h.description)||"",process_type:(null==h?void 0:h.process_type)||"sequential",agent_ids:(null==h?void 0:h.agent_ids)||[],task_delegation_enabled:null===(t=null==h?void 0:h.task_delegation_enabled)||void 0===t||t,verbose:null!==(s=null==h?void 0:h.verbose)&&void 0!==s&&s,config:(null==h?void 0:h.config)||{}}),[f,v]=(0,a.useState)((null==h?void 0:h.agent_ids)||[]),[y,j]=(0,a.useState)(!1),[N,w]=(0,a.useState)(null);(0,a.useEffect)(()=>{h&&(b({name:h.name,description:h.description,process_type:h.process_type,agent_ids:h.agent_ids,task_delegation_enabled:h.task_delegation_enabled,verbose:h.verbose,config:h.config}),v(h.agent_ids))},[h]);let k=e=>{let t=f.includes(e)?f.filter(t=>t!==e):[...f,e];v(t),b({...p,agent_ids:t})},_=async e=>{if(e.preventDefault(),w(null),0===p.agent_ids.length){w("Please select at least one agent");return}j(!0);try{if(l){let e=await o(l,p);null==n||n(e.id)}else{let e=await d(p);null==n||n(e.id)}}catch(e){w(e instanceof Error?e.message:"Failed to save crew")}finally{j(!1)}};return(0,r.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:l?"Edit Crew":"Create New Crew"}),(0,r.jsxs)("form",{onSubmit:_,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Crew Name"}),(0,r.jsx)("input",{id:"name",type:"text",required:!0,value:p.name,onChange:e=>b({...p,name:e.target.value}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-blue-500",placeholder:"e.g., Research Team"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,r.jsx)("textarea",{id:"description",rows:3,value:p.description,onChange:e=>b({...p,description:e.target.value}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-blue-500",placeholder:"What does this crew do?"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"process_type",className:"block text-sm font-medium text-gray-700",children:"Collaboration Pattern"}),(0,r.jsxs)("select",{id:"process_type",value:p.process_type,onChange:e=>b({...p,process_type:e.target.value}),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"sequential",children:"Sequential (agents work in order)"}),(0,r.jsx)("option",{value:"hierarchical",children:"Hierarchical (manager assigns tasks)"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",checked:p.task_delegation_enabled,onChange:e=>b({...p,task_delegation_enabled:e.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("span",{className:"text-sm text-gray-700",children:"Enable task delegation"})]}),(0,r.jsxs)("label",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",checked:p.verbose,onChange:e=>b({...p,verbose:e.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("span",{className:"text-sm text-gray-700",children:"Verbose logging"})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Select Agents (",f.length," selected)"]}),0===g.length?(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"No agents available. Create agents first."}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:g.map(e=>(0,r.jsx)(u,{agent:e,selected:f.includes(e.id),onToggle:()=>k(e.id)},e.id))})]}),N&&(0,r.jsx)("div",{className:"rounded-md bg-red-50 p-4",children:(0,r.jsx)("p",{className:"text-sm text-red-800",children:N})}),(0,r.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,r.jsx)("button",{type:"button",onClick:()=>window.history.back(),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:y,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:y?"Saving...":l?"Update Crew":"Create Crew"})]})]})]})}function g(){let e=(0,l.useRouter)(),{crews:t,loading:s,error:o,refetch:x}=c(),u=(0,l.useSearchParams)(),[g,h]=(0,a.useState)(!1),[p,b]=(0,a.useState)(),f=()=>{x()},v=null==u?void 0:u.get("manager_llm_provider_id");(0,a.useEffect)(()=>{},[v]);let y=()=>{b(void 0),h(!0)},j=e=>{b(e),h(!0)};return g?(0,r.jsx)(n.Z,{children:(0,r.jsxs)("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[(0,r.jsx)(i.Z,{}),(0,r.jsxs)("div",{className:"flex-1 overflow-auto",children:[(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)(d.Z,{})}),(0,r.jsx)(m,{crewId:p,onSave:e=>{h(!1),f()}})]})]})}):(0,r.jsx)(n.Z,{children:(0,r.jsxs)("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[(0,r.jsx)(i.Z,{}),(0,r.jsx)("div",{className:"flex-1 overflow-auto",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto p-6",children:[(0,r.jsx)(d.Z,{}),(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Crews"}),(0,r.jsx)("div",{className:"flex gap-2",children:(0,r.jsx)("button",{onClick:y,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Create Crew"})})]}),v&&(0,r.jsxs)("div",{className:"mb-4 flex items-center gap-3",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Active filter:"}),(0,r.jsxs)("span",{className:"inline-flex items-center gap-2 text-xs bg-purple-50 text-purple-700 border border-purple-200 px-2 py-1 rounded",children:["Crews \xb7 manager provider #",v,(0,r.jsx)("button",{onClick:()=>{e.push("/crews")},className:"ml-1 text-purple-700 hover:text-purple-900","aria-label":"Clear filter",title:"Clear filter",children:"âœ•"})]})]}),o?(0,r.jsx)("div",{className:"flex flex-col items-center justify-center py-12",children:(0,r.jsxs)("div",{className:"text-center max-w-md",children:[(0,r.jsxs)("p",{className:"text-red-600 mb-4",children:["Failed to load data: ",o]}),(0,r.jsx)("button",{onClick:f,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Retry"})]})}):s?(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):0===t.length?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,r.jsx)("p",{className:"text-gray-500 mb-4",children:"No crews yet. Create your first crew to get started."}),(0,r.jsx)("button",{onClick:y,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Create Crew"})]}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(v?t.filter(e=>e.manager_llm_provider_id===Number(v)):t).map(e=>(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200 hover:shadow-lg transition-shadow",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:e.description}),(0,r.jsxs)("div",{className:"mt-4 flex items-center gap-2",children:[(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded bg-purple-100 text-purple-800",children:e.process_type}),(0,r.jsxs)("span",{className:"px-2 py-1 text-xs font-medium rounded bg-blue-100 text-blue-800",children:[e.agent_ids.length," agent",1!==e.agent_ids.length?"s":""]})]}),(0,r.jsx)("button",{onClick:()=>j(e.id),className:"mt-4 w-full px-4 py-2 text-sm font-medium text-blue-600 bg-blue-50 rounded-md hover:bg-blue-100",children:"Edit Crew"})]},e.id))})]})})]})})}},9222:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var r=s(7437),a=s(1396),l=s.n(a),n=s(4033),i=s(2265);let d={"/dashboard":"Dashboard","/flows":"Flows","/crews":"Crews","/agents":"Agents","/tools":"Tools","/observability":"Observability","/chat":"Chat","/executions":"Executions","/settings":"Settings","/profile":"Profile"};function o(){let{breadcrumbs:e}=function(){let e=(0,n.usePathname)(),t=(0,i.useMemo)(()=>{if(!e)return[];let t=e.split("/").filter(Boolean),s=[];s.push({label:"Home",href:"/dashboard",isActive:"/dashboard"===e});let r="";return t.forEach((e,a)=>{r+="/".concat(e);let l=a===t.length-1;if(!isNaN(Number(e)))return;if("edit"===e){s.push({label:"Edit",href:r,isActive:l});return}let n=d[r]||e.charAt(0).toUpperCase()+e.slice(1);s.push({label:n,href:r,isActive:l})}),s},[e]),s=(0,i.useMemo)(()=>{if(!e)return"Home";let s=t[t.length-1];return(null==s?void 0:s.label)||"Home"},[e,t]);return{breadcrumbs:t,currentPage:s,pathname:e,isActive:t=>null==e?void 0:e.startsWith(t)}}();return e.length<=1?null:(0,r.jsx)("nav",{"aria-label":"Breadcrumb",className:"mb-4",children:(0,r.jsx)("ol",{className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-400",children:e.map((e,t)=>(0,r.jsxs)("li",{className:"flex items-center",children:[t>0&&(0,r.jsx)("svg",{className:"w-4 h-4 text-gray-400 dark:text-gray-500 mx-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),e.isActive?(0,r.jsx)("span",{className:"text-gray-900 dark:text-gray-100 font-medium","aria-current":"page",children:e.label}):(0,r.jsx)(l(),{href:e.href,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors",children:e.label})]},e.href))})})}},1396:function(e,t,s){e.exports=s(5250)}},function(e){e.O(0,[311,279,67,971,458,744],function(){return e(e.s=4217)}),_N_E=e.O()}]);