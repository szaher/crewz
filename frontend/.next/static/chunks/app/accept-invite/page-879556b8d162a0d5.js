(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[881],{7745:function(t,e,s){Promise.resolve().then(s.bind(s,7629))},7629:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return l}});var r=s(7437),n=s(4033),o=s(2265),a=s(6312);function l(){let t=(0,n.useSearchParams)(),e=(0,n.useRouter)(),s=t.get("token")||"",[l,i]=(0,o.useState)(""),[c,u]=(0,o.useState)(""),[d,h]=(0,o.useState)(null),[m,p]=(0,o.useState)(!1),f=async()=>{if(h(null),!s){h("Missing token");return}if(!l||l!==c){h("Passwords must match and be non-empty");return}p(!0);let t=await a.x.post("/api/v1/auth/accept-invite",{token:s,password:l},{skipAuth:!0});p(!1),t.error?h(t.error):(h("Success! Redirecting to login..."),setTimeout(()=>e.push("/login"),1200))};return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsxs)("div",{className:"w-full max-w-md bg-white border border-gray-200 rounded-lg shadow p-6",children:[(0,r.jsx)("h1",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Accept Invitation"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Set your account password to finish setup."}),d&&(0,r.jsx)("div",{className:"mb-3 text-sm ".concat(d.startsWith("Success")?"text-green-700":"text-red-700"),children:d}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-700",children:"New Password"}),(0,r.jsx)("input",{type:"password",value:l,onChange:t=>i(t.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-700",children:"Confirm Password"}),(0,r.jsx)("input",{type:"password",value:c,onChange:t=>u(t.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,r.jsx)("button",{onClick:f,disabled:m,className:"w-full mt-2 px-4 py-2 rounded-md text-white ".concat(m?"bg-blue-300":"bg-blue-600 hover:bg-blue-700"),children:m?"Submitting...":"Set Password"})]})]})})}},6312:function(t,e,s){"use strict";s.d(e,{x:function(){return a}});let r="http://localhost:8000",n="http://localhost:8000";{let t="".concat(window.location.protocol,"//").concat(window.location.hostname,":8000");r=n&&!/^(https?:\/\/)?(localhost|127\.0\.0\.1)(:|$)/i.test(n)?n:t}class o{setUnauthorizedHandler(t){this.onUnauthorized=t}setToken(t){this.token=t,localStorage.setItem("access_token",t)}clearToken(){this.token=null,localStorage.removeItem("access_token")}getToken(){return this.token}async request(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{method:s="GET",body:r,headers:n={},skipAuth:o=!1}=e,a="".concat(this.baseUrl).concat(t),l={"Content-Type":"application/json",...n};!o&&this.token&&(l.Authorization="Bearer ".concat(this.token));let i={method:s,headers:l};r&&"GET"!==s&&(i.body=JSON.stringify(r));try{let t=await fetch(a,i),e=t.headers.get("content-type")||"",s=204===t.status||205===t.status||"0"===t.headers.get("content-length"),r=null;if(!s){if(e.includes("application/json"))try{r=await t.json()}catch(t){r=null}else try{r=await t.text()||null}catch(t){r=null}}if(!t.ok)return 401===t.status&&!o&&(this.clearToken(),this.onUnauthorized&&this.onUnauthorized()),{error:"string"==typeof r&&r||(null==r?void 0:r.detail)||(null==r?void 0:r.message)||"Request failed",status:t.status};return{data:r,status:t.status}}catch(t){return{error:t instanceof Error?t.message:"Network error",status:0}}}async get(t,e){return this.request(t,{...e,method:"GET"})}async post(t,e,s){return this.request(t,{...s,method:"POST",body:e})}async put(t,e,s){return this.request(t,{...s,method:"PUT",body:e})}async delete(t,e){return this.request(t,{...e,method:"DELETE"})}constructor(t=r){this.token=null,this.onUnauthorized=null,this.baseUrl=t,this.token=localStorage.getItem("access_token")}}let a=new o},622:function(t,e,s){"use strict";var r=s(2265),n=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function c(t,e,s){var r,o={},c=null,u=null;for(r in void 0!==s&&(c=""+s),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(u=e.ref),e)a.call(e,r)&&!i.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===o[r]&&(o[r]=e[r]);return{$$typeof:n,type:t,key:c,ref:u,props:o,_owner:l.current}}e.Fragment=o,e.jsx=c,e.jsxs=c},7437:function(t,e,s){"use strict";t.exports=s(622)},4033:function(t,e,s){t.exports=s(5313)}},function(t){t.O(0,[971,458,744],function(){return t(t.s=7745)}),_N_E=t.O()}]);