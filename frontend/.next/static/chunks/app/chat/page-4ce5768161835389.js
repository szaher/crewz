(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[929],{7444:function(e,t,a){Promise.resolve().then(a.bind(a,7459))},7459:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return h}});var r=a(7437),s=a(2265),l=a(4033),o=a(9755),n=a(8563),d=a(9222),i=a(6312);function c(e){let{toolInvocations:t}=e,[a,l]=(0,s.useState)(null),o=e=>{l(a===e?null:e)};return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("p",{className:"text-xs font-medium opacity-75",children:"Tool Invocations:"}),t.map((e,t)=>(0,r.jsxs)("div",{className:"bg-white bg-opacity-50 rounded border border-gray-300 overflow-hidden",children:[(0,r.jsxs)("button",{onClick:()=>o(t),className:"w-full flex items-center justify-between px-3 py-2 text-left hover:bg-gray-50 hover:bg-opacity-50",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["\uD83D\uDD27 ",e.tool_name||"Tool ".concat(e.tool_id)]}),e.duration_ms&&(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:["(",e.duration_ms,"ms)"]})]}),(0,r.jsx)("svg",{className:"w-4 h-4 transform transition-transform ".concat(a===t?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),a===t&&(0,r.jsxs)("div",{className:"px-3 py-2 space-y-2 border-t border-gray-300",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs font-medium text-gray-700 mb-1",children:"Inputs:"}),(0,r.jsx)("pre",{className:"text-xs bg-gray-100 rounded p-2 overflow-x-auto",children:JSON.stringify(e.inputs,null,2)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs font-medium text-gray-700 mb-1",children:"Outputs:"}),(0,r.jsx)("pre",{className:"text-xs bg-gray-100 rounded p-2 overflow-x-auto",children:JSON.stringify(e.outputs,null,2)})]})]})]},t))]})}function u(e){let{content:t}=e,a=(0,s.useRef)(null),[l,o]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{window.marked||await new Promise(e=>{let t=document.createElement("script");t.src="https://cdn.jsdelivr.net/npm/marked/marked.min.js",t.async=!0,t.onload=()=>e(),document.body.appendChild(t)}),window.DOMPurify||await new Promise(e=>{let t=document.createElement("script");t.src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.0.2/purify.min.js",t.async=!0,t.onload=()=>e(),document.body.appendChild(t)});try{var e,t;null===(t=window.marked)||void 0===t||null===(e=t.setOptions)||void 0===e||e.call(t,{gfm:!0,breaks:!0,headerIds:!0,mangle:!1})}catch(e){}o(!0)})()},[]);let n=(0,s.useMemo)(()=>{if(!t)return"";try{let e=window.marked?window.marked.parse(t):t;return window.DOMPurify?window.DOMPurify.sanitize(e,{ALLOWED_ATTR:["href","target","rel","src","alt","class","title","id","name","lang"]}):e}catch(e){return t}},[t,l]);return((0,s.useEffect)(()=>{try{window.hljs&&a.current&&a.current.querySelectorAll("pre code").forEach(e=>{window.hljs.highlightElement(e)}),a.current&&Array.from(a.current.querySelectorAll("pre")).forEach(e=>{if(e._hasCopyButton)return;e._hasCopyButton=!0,e.style.position=e.style.position||"relative";let t=document.createElement("button");t.type="button",t.textContent="Copy",t.className="absolute top-2 right-2 px-2 py-1 text-xs rounded bg-gray-200 hover:bg-gray-300 text-gray-800 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-gray-100 transition-colors",t.addEventListener("click",async a=>{a.stopPropagation();let r=e.querySelector("code"),s=r?r.innerText:e.innerText;try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(s);else{let e=document.createElement("textarea");e.value=s,e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}let e=t.textContent;t.textContent="Copied!",setTimeout(()=>{t.textContent=e||"Copy"},1200)}catch(a){let e=t.textContent;t.textContent="Failed",setTimeout(()=>{t.textContent=e||"Copy"},1200)}}),e.appendChild(t)})}catch(e){}},[n]),t)?(0,r.jsx)("div",{ref:a,className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:n}}):null}function x(e){let{messages:t}=e,a=(0,s.useRef)(null);return((0,s.useEffect)(()=>{var e;null===(e=a.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[t]),0===t.length)?(0,r.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500 dark:text-gray-400",children:(0,r.jsx)("p",{className:"text-sm",children:"No messages yet. Start the conversation!"})}):(0,r.jsxs)("div",{className:"px-6 py-5 space-y-4",children:[t.map(e=>{var t;return(0,r.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end dark:bg-slate-800/30 dark:rounded-xl dark:px-1.5 dark:py-1":"justify-start"),children:(0,r.jsxs)("div",{className:"max-w-[75%] rounded-xl px-4 py-3 border shadow-sm ".concat("user"===e.role?"bg-gradient-to-b from-sky-50 to-sky-100 text-slate-800 border-sky-200 dark:bg-transparent dark:text-slate-100/90 dark:border-slate-700":"assistant"===e.role?"bg-white text-slate-800 border-slate-200 dark:bg-transparent dark:text-slate-200 dark:border-slate-700":"bg-emerald-50 text-emerald-900 border-emerald-200 dark:bg-emerald-900/25 dark:text-emerald-200 dark:border-emerald-800/60"),children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)("span",{className:"text-[11px] font-medium opacity-75",children:"user"===e.role?"You":"assistant"===e.role?"Agent":"System"}),(0,r.jsx)("span",{className:"text-[11px] opacity-60",children:new Date(e.created_at).toLocaleTimeString()})]}),(0,r.jsx)("div",{className:"".concat((e.role,"prose prose-slate dark:prose-invert")," max-w-none leading-relaxed text-[15px] prose-a:text-blue-600 dark:prose-a:text-blue-300 prose-code:text-emerald-700 dark:prose-code:text-emerald-200"),children:(0,r.jsx)(u,{content:e.content})}),(null===(t=e.metadata)||void 0===t?void 0:t.tool_invocations)&&e.metadata.tool_invocations.length>0&&(0,r.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:(0,r.jsx)(c,{toolInvocations:e.metadata.tool_invocations})})]})},e.id)}),(0,r.jsx)("div",{ref:a})]})}function m(e){let{sessionId:t,sessionTitle:a,crewId:l,onManageTools:o,onTitleUpdate:n}=e,[d,c]=(0,s.useState)([]),[u,m]=(0,s.useState)(""),[p,h]=(0,s.useState)(!1),[g,b]=(0,s.useState)(!0),[v,y]=(0,s.useState)(0),[f,j]=(0,s.useState)(null),[w,N]=(0,s.useState)(!1),[k,C]=(0,s.useState)([]),[S,_]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{b(!0);let e=await i.x.get("/api/v1/chat/sessions/".concat(t,"/messages"),{headers:{}});b(!1),e.data&&c(e.data)})()},[t]),(0,s.useEffect)(()=>{let e=!1;return(async()=>{try{var a,r,s,l,o,n,d,c,u,x,m,p;N(!0);let h=await i.x.get("/api/v1/chat/sessions/".concat(t)),g=null!==(l=null!==(s=null==h?void 0:null===(a=h.data)||void 0===a?void 0:a.session)&&void 0!==s?s:null==h?void 0:h.data)&&void 0!==l?l:null,b=null,v=null!==(n=null!==(o=null==g?void 0:g.llm_provider_id)&&void 0!==o?o:null==g?void 0:g.provider_id)&&void 0!==n?n:null==g?void 0:null===(r=g.metadata)||void 0===r?void 0:r.llm_provider_id;if(v){let e=await i.x.get("/api/v1/llm-providers/".concat(v));b=null!==(u=null!==(c=null==e?void 0:null===(d=e.data)||void 0===d?void 0:d.provider)&&void 0!==c?c:null==e?void 0:e.data)&&void 0!==u?u:null}else{let e=await i.x.get("/api/v1/llm-providers",{params:{is_default:!0,page_size:1}}),t=null!==(p=null!==(m=null==e?void 0:null===(x=e.data)||void 0===x?void 0:x.providers)&&void 0!==m?m:null==e?void 0:e.data)&&void 0!==p?p:[];b=Array.isArray(t)?t[0]:null}e||j(b||null)}catch(t){e||j(null)}finally{e||N(!1)}})(),()=>{e=!0}},[t]),(0,s.useEffect)(()=>{let e=!1;return(async()=>{try{var a,r,s,l,o,n;_(!0);let[d,c]=await Promise.all([i.x.get("/api/v1/tools"),i.x.get("/api/v1/chat/sessions/".concat(t,"/tools"))]),u=null!==(l=null!==(s=null==d?void 0:null===(a=d.data)||void 0===a?void 0:a.tools)&&void 0!==s?s:null==d?void 0:d.data)&&void 0!==l?l:[],x=null!==(n=null!==(o=null==c?void 0:null===(r=c.data)||void 0===r?void 0:r.tool_ids)&&void 0!==o?o:null==c?void 0:c.data)&&void 0!==n?n:[],m=u.filter(e=>x.includes(e.id));e||C(m)}catch(t){e||C([])}finally{e||_(!1)}})(),()=>{e=!0}},[t]);let M=async()=>{if(u.trim()){h(!0),m("");try{let e=await i.x.post("/api/v1/chat/sessions/".concat(t,"/generate?user_message=").concat(encodeURIComponent(u+"\n\nPlease format your entire response in GitHub-Flavored Markdown. Use fenced code blocks with appropriate languages (e.g., ```json, ```yaml, ```python, ```javascript) for any code, JSON, YAML, or logs.")));if(e.data){let t=e.data.user_message,a=e.data.ai_response;c(e=>[...e,t,a]),y(e=>e+1)}}catch(e){console.error("Failed to send/generate message",e)}finally{h(!1)}}};return(0,s.useEffect)(()=>{3===v&&(async()=>{try{var e;let a=((await i.x.get("/api/v1/chat/sessions/".concat(t,"/messages"))).data||[]).slice(-12).map(e=>({role:e.role,content:e.content})),r={messages:[{role:"system",content:"You are a helpful assistant. Given the conversation, propose a short, descriptive session title (max 6 words). Return ONLY the title text without quotes or punctuation."},...a]},s=await i.x.post("/api/v1/chat/direct",r),l=((null==s?void 0:null===(e=s.data)||void 0===e?void 0:e.content)||"").trim().replace(/^['"\s]+|[\.\!\?'"]+$/g,"");if(!l)return;await i.x.put("/api/v1/chat/sessions/".concat(t),{title:l}),null==n||n(l)}catch(e){console.warn("Failed to auto-title session",e)}})()},[v,t,n]),(0,r.jsxs)("div",{className:"flex flex-col h-full bg-white dark:bg-gray-900",children:[(0,r.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-800 px-6 py-3",children:(0,r.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,r.jsxs)("div",{className:"min-w-0",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 truncate",children:a||"Chat Session #".concat(t)}),l&&(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["Crew ID: ",l]}),(0,r.jsxs)("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[(0,r.jsxs)("span",{className:"inline-flex items-center gap-1.5 text-xs bg-gray-100 dark:bg-gray-800/80 text-gray-700 dark:text-gray-200 border border-gray-200 dark:border-gray-700 px-2 py-1 rounded-full",children:[(0,r.jsxs)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,children:[(0,r.jsx)("path",{d:"M12 2v4"}),(0,r.jsx)("path",{d:"M12 18v4"}),(0,r.jsx)("path",{d:"M4.93 4.93l2.83 2.83"}),(0,r.jsx)("path",{d:"M16.24 16.24l2.83 2.83"}),(0,r.jsx)("path",{d:"M2 12h4"}),(0,r.jsx)("path",{d:"M18 12h4"}),(0,r.jsx)("path",{d:"M4.93 19.07l2.83-2.83"}),(0,r.jsx)("path",{d:"M16.24 7.76l2.83-2.83"})]}),w?"Loading provider…":f?"".concat(f.name||f.provider_type||"Provider").concat(f.model_name?" \xb7 ".concat(f.model_name):""):"Default Provider"]}),(0,r.jsxs)("span",{className:"inline-flex items-center gap-1.5 text-xs bg-gray-100 dark:bg-gray-800/80 text-gray-700 dark:text-gray-200 border border-gray-200 dark:border-gray-700 px-2 py-1 rounded-full",children:[(0,r.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,children:(0,r.jsx)("path",{d:"M12 2l3 7h7l-5.5 4 2 7L12 17l-6.5 3 2-7L2 9h7z"})}),S?"Loading tools…":k.length?"".concat(k.length," tool").concat(k.length>1?"s":""):"No tools"]}),k.length>0&&(0,r.jsxs)("div",{className:"flex flex-wrap gap-1",children:[k.slice(0,4).map(e=>(0,r.jsx)("span",{className:"inline-flex items-center text-[10px] bg-white dark:bg-gray-900/80 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 px-2 py-0.5 rounded-full",children:e.name},e.id)),k.length>4&&(0,r.jsxs)("span",{className:"text-[10px] text-gray-500",children:["+",k.length-4," more"]})]})]})]}),o&&(0,r.jsx)("button",{onClick:o,className:"h-9 px-3 text-sm border rounded hover:bg-gray-100 whitespace-nowrap self-start",title:"Manage Tools","aria-label":"Manage tools",children:"Manage Tools"})]})}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto bg-gradient-to-b from-white to-slate-50 dark:from-[#2b2f36] dark:to-[#26272b]",children:g?(0,r.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,r.jsx)(x,{messages:d})}),(0,r.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-800 px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-end gap-2 p-3 bg-white dark:bg-[#40414f] border border-slate-200 dark:border-[#2a2b32] rounded-xl",children:[(0,r.jsx)("textarea",{value:u,onChange:e=>m(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),M())},placeholder:"Message…",rows:1,disabled:p,className:"flex-1 bg-transparent text-slate-900 dark:text-slate-100 placeholder:text-slate-400 dark:placeholder:text-slate-300 px-1 py-1 resize-none focus:outline-none max-h-40 min-h-[44px]"}),(0,r.jsx)("button",{onClick:M,disabled:!u.trim()||p,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Sending…":"Send"})]})})]})}function p(e){let{isOpen:t,onClose:a,title:s,children:l,size:o="md"}=e;return t?(0,r.jsxs)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:a}),(0,r.jsx)("div",{className:"flex min-h-full items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"relative bg-white rounded-lg shadow-xl ".concat({sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[o]," w-full"),children:[s&&(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:s}),(0,r.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsx)("div",{className:"p-6",children:l})]})})]}):null}function h(){var e,t;let a=(0,l.useRouter)(),c=(0,l.useSearchParams)(),[u,x]=(0,s.useState)([]),[h,b]=(0,s.useState)(null),[v,y]=(0,s.useState)(!0),[f,j]=(0,s.useState)(!1),[w,N]=(0,s.useState)(""),[k,C]=(0,s.useState)(""),[S,_]=(0,s.useState)([]),[M,L]=(0,s.useState)(null),[A,E]=(0,s.useState)(""),[z,D]=(0,s.useState)(""),[P,O]=(0,s.useState)([]),[F,T]=(0,s.useState)(!1),[R,I]=(0,s.useState)([]),[B,H]=(0,s.useState)([]),[U,V]=(0,s.useState)(!1),[Y,K]=(0,s.useState)(""),[W,q]=(0,s.useState)({open:!1,title:"",message:""}),[G,J]=(0,s.useState)(null),[Z,Q]=(0,s.useState)(""),[$,X]=(0,s.useState)({open:!1,session:null}),[ee,et]=(0,s.useState)({open:!1,mode:"create",folder:null,name:""}),[ea,er]=(0,s.useState)({open:!1,folder:null}),[es,el]=(0,s.useState)(null),[eo,en]=(0,s.useState)({open:!1}),[ed,ei]=(0,s.useState)([]);(0,s.useEffect)(()=>{ec(),eu()},[]),(0,s.useEffect)(()=>{f&&(ex(),em())},[f]);let ec=async()=>{y(!0);try{let e=new URLSearchParams;k.trim()&&e.set("q",k.trim()),null!==M&&e.set("folder_id",String(M));let t=await i.x.get("/api/v1/chat/sessions".concat(e.toString()?"?".concat(e.toString()):"")),a=Array.isArray(t.data)?t.data:[];x(a);let r=null==c?void 0:c.get("session"),s=r?Number(r):null;s&&a.some(e=>e.id===s)?b(s):a.length>0&&b(a[0].id)}catch(e){console.error("Failed to load chat sessions:",e),x([])}finally{y(!1)}},eu=async()=>{try{let e=await i.x.get("/api/v1/chat/folders");_(Array.isArray(e.data)?e.data:[])}catch(e){_([])}},ex=async()=>{T(!0);try{let e=await i.x.get("/api/v1/llm-providers",{params:{page:1,page_size:100,is_active:!0}});e.data&&O(e.data.providers||[])}catch(e){console.error("Failed to load providers",e),O([])}finally{T(!1)}},em=async()=>{V(!0);try{let e=await i.x.get("/api/v1/tools");e.data&&I(e.data.tools||[])}catch(e){console.error("Failed to load tools",e),I([])}finally{V(!1)}},ep=async()=>{let e=w.trim()||"New Chat ".concat(new Date().toLocaleString());try{let a={title:e,system_prompt:z||void 0};A&&(a.llm_provider_id=A),B.length&&(a.tool_ids=B),Y&&(a.folder_id=Y);let r=await i.x.post("/api/v1/chat/sessions",a);if(r.data){var t;let e=null!==(t=r.data.session)&&void 0!==t?t:r.data;x([...u,e]),b(e.id),j(!1),N(""),E(""),D(""),H([]),K("")}else if(r.error){let e=String(r.error);q({open:!0,title:"Unable to Create Session",message:e.includes("No default LLM provider")||e.includes("Default provider")?"No LLM provider is configured. Please add a provider in Providers or select one when creating a session.":e})}}catch(e){console.error("Failed to create session:",e),q({open:!0,title:"Unable to Create Session",message:"An unexpected error occurred while creating the session."})}},eh=u.find(e=>e.id===h),eg=async e=>{try{let a=await i.x.post("/api/v1/chat/sessions",{title:e});if(a.data){var t;let e=null!==(t=a.data.session)&&void 0!==t?t:a.data;x(t=>[...t,e]),b(e.id),j(!1),N(""),E(""),D(""),H([])}}catch(e){console.error("Auto session creation failed",e)}};return(0,s.useEffect)(()=>{eo.open&&h&&(async()=>{var e,t;let[a,r]=await Promise.all([i.x.get("/api/v1/tools"),i.x.get("/api/v1/chat/sessions/".concat(h,"/tools"))]);ei((null===(e=a.data)||void 0===e?void 0:e.tools)||[]),en({open:!0,toolIds:(null===(t=r.data)||void 0===t?void 0:t.tool_ids)||[]})})()},[eo.open,h]),(0,r.jsxs)(o.Z,{children:[(0,r.jsxs)("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[(0,r.jsx)(n.Z,{}),(0,r.jsx)("div",{className:"flex-1 overflow-auto",children:(0,r.jsxs)("div",{className:"h-screen flex flex-col",children:[(0,r.jsx)("div",{className:"px-6 pt-4",children:(0,r.jsx)(d.Z,{})}),(0,r.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,r.jsxs)("div",{className:"w-72 bg-gray-50 dark:bg-gray-900 border-r border-gray-200 dark:border-gray-800 flex flex-col",children:[(0,r.jsx)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-800",children:(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Chat Sessions"})}),(0,r.jsx)("div",{className:"p-3 border-b border-gray-200 dark:border-gray-800",children:(0,r.jsx)("input",{value:k,onChange:e=>C(e.target.value),onKeyDown:e=>{"Enter"===e.key&&ec()},placeholder:"Search sessions...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md text-sm bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"})}),(0,r.jsxs)("div",{className:"px-3 py-2 border-b border-gray-200 dark:border-gray-800",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Folders"}),(0,r.jsx)("button",{className:"p-1 border rounded hover:bg-gray-100 dark:hover:bg-gray-800 dark:border-gray-700","aria-label":"New folder",title:"New folder",onClick:()=>et({open:!0,mode:"create",folder:null,name:""}),children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4",children:(0,r.jsx)("path",{d:"M12 4.5a.75.75 0 01.75.75V11h5.75a.75.75 0 010 1.5H12.75v5.75a.75.75 0 01-1.5 0V12.5H5.5a.75.75 0 010-1.5h5.75V5.25A.75.75 0 0112 4.5z"})})})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("button",{onClick:()=>{L(null),ec()},className:"w-full text-left px-3 py-1.5 rounded ".concat(null===M?"bg-blue-50 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300":"hover:bg-gray-100 dark:hover:bg-gray-800"),children:"All"}),S.map(e=>(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("button",{onClick:()=>{L(e.id),ec()},className:"flex-1 text-left px-3 py-1.5 rounded ".concat(M===e.id?"bg-blue-50 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300":"hover:bg-gray-100 dark:hover:bg-gray-800"),children:e.name}),(0,r.jsx)("button",{className:"p-1 border rounded hover:bg-gray-100 dark:hover:bg-gray-800 dark:border-gray-700","aria-label":"Rename folder",title:"Rename",onClick:()=>et({open:!0,mode:"rename",folder:e,name:e.name}),children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4",children:[(0,r.jsx)("path",{d:"M21.731 2.269a2.625 2.625 0 00-3.714 0l-1.157 1.157 3.714 3.714 1.157-1.157a2.625 2.625 0 000-3.714z"}),(0,r.jsx)("path",{d:"M3 17.25V21h3.75L19.5 8.25l-3.75-3.75L3 17.25z"})]})}),(0,r.jsx)("button",{className:"p-1 border rounded hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:border-gray-700","aria-label":"Delete folder",title:"Delete",onClick:()=>er({open:!0,folder:e}),children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4",children:[(0,r.jsx)("path",{d:"M9 3a1 1 0 00-1 1v1H4.75a.75.75 0 000 1.5h14.5a.75.75 0 000-1.5H16V4a1 1 0 00-1-1H9z"}),(0,r.jsx)("path",{fillRule:"evenodd",d:"M6.5 8.25a.75.75 0 01.75-.75h9.5a.75.75 0 01.75.75v10a2 2 0 01-2 2h-7a2 2 0 01-2-2v-10zM10 10a.75.75 0 01.75.75v7a.75.75 0 01-1.5 0v-7A.75.75 0 0110 10zm4 0a.75.75 0 01.75.75v7a.75.75 0 01-1.5 0v-7A.75.75 0 0114 10z",clipRule:"evenodd"})]})})]},e.id))]})]}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto",children:v?(0,r.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):0===u.length?(0,r.jsx)("div",{className:"p-4 text-center text-sm text-gray-500 dark:text-gray-400",children:"No chat sessions yet"}):(0,r.jsx)("div",{className:"p-1 space-y-0.5",children:u.map(e=>{var t;return(0,r.jsx)("div",{className:"rounded-md px-2 py-1 text-sm ".concat(h===e.id?"bg-blue-100 text-blue-900 dark:bg-blue-900/30 dark:text-blue-300":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-200"),children:(0,r.jsx)("div",{className:"flex items-center justify-between",children:G===e.id?(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,r.jsx)("input",{autoFocus:!0,value:Z,onChange:e=>Q(e.target.value),className:"flex-1 px-2 py-1 border border-gray-300 rounded"}),(0,r.jsx)("button",{className:"text-xs px-2 py-1 border rounded bg-blue-600 text-white hover:bg-blue-700",onClick:async()=>{let t=Z.trim();if(!t){J(null);return}let a=await i.x.put("/api/v1/chat/sessions/".concat(e.id),{title:t});J(null),a.error||await ec()},children:"Save"}),(0,r.jsx)("button",{className:"text-xs px-2 py-1 border rounded",onClick:()=>{J(null),Q("")},children:"Cancel"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{className:"font-medium truncate text-left flex-1",onClick:()=>b(e.id),children:e.title||"Untitled"}),(0,r.jsxs)("div",{className:"flex items-center gap-1 relative",children:[(0,r.jsxs)("button",{className:"p-1 border rounded hover:bg-gray-100 dark:hover:bg-gray-800 dark:border-gray-700",onClick:()=>{J(e.id),Q(e.title||"")},"aria-label":"Rename session",title:"Rename",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4",children:[(0,r.jsx)("path",{d:"M21.731 2.269a2.625 2.625 0 00-3.714 0l-1.157 1.157 3.714 3.714 1.157-1.157a2.625 2.625 0 000-3.714z"}),(0,r.jsx)("path",{d:"M3 17.25V21h3.75L19.5 8.25l-3.75-3.75L3 17.25z"})]}),(0,r.jsx)("span",{className:"sr-only",children:"Rename"})]}),(0,r.jsx)("button",{className:"p-1 border rounded hover:bg-gray-100 dark:hover:bg-gray-800 dark:border-gray-700","aria-label":"Move to folder",title:e.folder_id?"Folder: ".concat((null===(t=S.find(t=>t.id===e.folder_id))||void 0===t?void 0:t.name)||"Unknown"):"Move to folder",onClick:()=>el(es===e.id?null:e.id),children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4",children:(0,r.jsx)("path",{d:"M2.25 6.75A2.25 2.25 0 014.5 4.5h4.086a2.25 2.25 0 011.59.659l1.415 1.415a2.25 2.25 0 001.59.659H19.5A2.25 2.25 0 0121.75 9v7.5a2.25 2.25 0 01-2.25 2.25h-15A2.25 2.25 0 012.25 16.5V6.75z"})})}),es===e.id&&(0,r.jsxs)("div",{className:"absolute right-0 z-10 mt-1 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded shadow p-2 text-sm",children:[(0,r.jsx)("button",{className:"block w-full text-left px-3 py-1.5 rounded ".concat(null==e.folder_id?"bg-blue-50 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300":"hover:bg-gray-100 dark:hover:bg-gray-800"),onClick:async()=>{let t=await i.x.put("/api/v1/chat/sessions/".concat(e.id),{folder_id:null});el(null),t.error||await ec()},children:"None"}),S.map(t=>(0,r.jsx)("button",{className:"block w-full text-left px-3 py-1.5 rounded ".concat(e.folder_id===t.id?"bg-blue-50 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300":"hover:bg-gray-100 dark:hover:bg-gray-800"),onClick:async()=>{let a=await i.x.put("/api/v1/chat/sessions/".concat(e.id),{folder_id:t.id});el(null),a.error||await ec()},children:t.name},t.id))]}),(0,r.jsxs)("button",{className:"p-1 border rounded hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:border-gray-700",onClick:()=>X({open:!0,session:e}),"aria-label":"Delete session",title:"Delete",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4",children:[(0,r.jsx)("path",{d:"M9 3a1 1 0 00-1 1v1H4.75a.75.75 0 000 1.5h14.5a.75.75 0 000-1.5H16V4a1 1 0 00-1-1H9z"}),(0,r.jsx)("path",{fillRule:"evenodd",d:"M6.5 8.25a.75.75 0 01.75-.75h9.5a.75.75 0 01.75.75v10a2 2 0 01-2 2h-7a2 2 0 01-2-2v-10zM10 10a.75.75 0 01.75.75v7a.75.75 0 01-1.5 0v-7A.75.75 0 0110 10zm4 0a.75.75 0 01.75.75v7a.75.75 0 01-1.5 0v-7A.75.75 0 0114 10z",clipRule:"evenodd"})]}),(0,r.jsx)("span",{className:"sr-only",children:"Delete"})]})]})]})})},e.id)})})}),(0,r.jsx)("div",{className:"p-4 border-t border-gray-200",children:(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>j(!0),className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"New Session"}),(0,r.jsx)("button",{onClick:()=>void ec(),className:"px-3 py-2 text-sm border rounded",children:"Refresh"})]})})]}),(0,r.jsx)("div",{className:"flex-1 flex flex-col",children:h&&eh?(0,r.jsx)(m,{sessionId:h,sessionTitle:eh.title||"Untitled",crewId:eh.crew_id||void 0,onManageTools:()=>en({open:!0}),onTitleUpdate:e=>{x(t=>t.map(t=>t.id===h?{...t,title:e}:t))}}):(0,r.jsx)(g,{onCreateSession:()=>j(!0),onGoConfigure:()=>a.push("/providers"),onAutoCreateSession:eg})}),f&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"New Chat Session"}),(0,r.jsxs)("div",{className:"space-y-4",children:[0===P.length&&(0,r.jsx)("div",{className:"p-3 rounded border border-amber-300 bg-amber-50 text-amber-900 text-sm",children:"No active LLM provider found. You can still create a session, but chatting requires a configured provider. Go to Providers to add one."}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"session_name",className:"block text-sm font-medium text-gray-700",children:"Session Name"}),(0,r.jsx)("input",{id:"session_name",type:"text",value:w,onChange:e=>N(e.target.value),placeholder:"e.g., Research Discussion",className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"provider_id",className:"block text-sm font-medium text-gray-700",children:"Provider"}),(0,r.jsxs)("select",{id:"provider_id",value:A,onChange:e=>E(e.target.value?Number(e.target.value):""),disabled:F,className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[(0,r.jsx)("option",{value:"",children:"Use default provider"}),P.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.name," (",e.provider_type,")"]},e.id))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"folder_id",className:"block text-sm font-medium text-gray-700",children:"Folder (Optional)"}),(0,r.jsxs)("select",{id:"folder_id",value:Y,onChange:e=>K(e.target.value?Number(e.target.value):""),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"",children:"None"}),S.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"system_prompt",className:"block text-sm font-medium text-gray-700",children:"System Prompt (Optional)"}),(0,r.jsx)("textarea",{id:"system_prompt",rows:3,value:z,onChange:e=>D(e.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-blue-500"}),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)("button",{type:"button",onClick:()=>{let e=R.filter(e=>B.includes(e.id)).map(e=>"- ".concat(e.name,": ").concat(e.description));D("You can use the following tools when helpful. Return clearly labeled results and cite which tool was used.\nTools:\n".concat(e.join("\n")))},disabled:0===B.length,className:"text-xs px-2 py-1 border rounded-md disabled:opacity-50",children:"Suggest prompt from selected tools"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Tools (Optional)"}),(0,r.jsx)("div",{className:"mt-1 max-h-40 overflow-y-auto border rounded-md p-2",children:U?(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Loading tools..."}):0===R.length?(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"No tools available"}):R.map(e=>(0,r.jsxs)("label",{className:"flex items-center gap-2 py-1 text-sm",children:[(0,r.jsx)("input",{type:"checkbox",checked:B.includes(e.id),onChange:t=>{H(a=>t.target.checked?[...a,e.id]:a.filter(t=>t!==e.id))}}),(0,r.jsxs)("span",{className:"truncate",children:[(0,r.jsx)("span",{className:"font-medium",children:e.name})," – ",(0,r.jsx)("span",{className:"text-gray-500",children:e.description})]})]},e.id))})]})]}),(0,r.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[(0,r.jsx)("button",{onClick:()=>{j(!1),N(""),E(""),D(""),H([]),K("")},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),(0,r.jsx)("button",{onClick:ep,disabled:!w.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Create"})]})]})})]})]})})]}),W.open&&(0,r.jsxs)(p,{isOpen:W.open,onClose:()=>q({...W,open:!1}),title:W.title,size:"sm",children:[(0,r.jsx)("div",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:W.message}),(0,r.jsx)("div",{className:"mt-4 flex justify-end",children:(0,r.jsx)("button",{onClick:()=>q({...W,open:!1}),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"OK"})})]}),ee.open&&(0,r.jsx)(p,{isOpen:ee.open,onClose:()=>et({open:!1,mode:"create",folder:null,name:""}),title:"create"===ee.mode?"New Folder":"Rename Folder",size:"sm",children:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("input",{autoFocus:!0,value:ee.name,onChange:e=>et({...ee,name:e.target.value}),placeholder:"Folder name",className:"w-full px-3 py-2 border border-gray-300 rounded"}),(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)("button",{onClick:()=>et({open:!1,mode:"create",folder:null,name:""}),className:"px-4 py-2 border rounded",children:"Cancel"}),(0,r.jsx)("button",{onClick:async()=>{let e=ee.name.trim();e&&("create"===ee.mode?(await i.x.post("/api/v1/chat/folders",{name:e})).error||await eu():ee.folder&&!(await i.x.put("/api/v1/chat/folders/".concat(ee.folder.id),{name:e})).error&&await eu(),et({open:!1,mode:"create",folder:null,name:""}))},className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Save"})]})]})}),ea.open&&(0,r.jsxs)(p,{isOpen:ea.open,onClose:()=>er({open:!1,folder:null}),title:"Delete Folder",size:"sm",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-800",children:['Delete folder "',null===(e=ea.folder)||void 0===e?void 0:e.name,'"? Sessions will be moved out of this folder.']}),(0,r.jsxs)("div",{className:"mt-4 flex justify-end gap-2",children:[(0,r.jsx)("button",{onClick:()=>er({open:!1,folder:null}),className:"px-4 py-2 border rounded",children:"Cancel"}),(0,r.jsx)("button",{onClick:async()=>{if(!ea.folder)return;let e=ea.folder.id,t=await i.x.delete("/api/v1/chat/folders/".concat(e));er({open:!1,folder:null}),t.error||(M===e&&L(null),await eu(),await ec())},className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Delete"})]})]}),eo.open&&(0,r.jsx)(p,{isOpen:eo.open,onClose:()=>en({open:!1}),title:"Manage Tools",size:"lg",children:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Select which tools this session is allowed to use."}),(0,r.jsx)("div",{className:"max-h-64 overflow-y-auto border rounded",children:0===ed.length?(0,r.jsx)("div",{className:"p-3 text-sm text-gray-500",children:"No tools available"}):ed.map(e=>(0,r.jsxs)("label",{className:"flex items-center gap-2 p-2 border-b last:border-b-0",children:[(0,r.jsx)("input",{type:"checkbox",checked:(eo.toolIds||[]).includes(e.id),onChange:t=>{let a=new Set(eo.toolIds||[]);t.target.checked?a.add(e.id):a.delete(e.id),en({open:!0,toolIds:Array.from(a)})}}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-sm font-medium",children:[e.name," ",(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:["(",e.tool_type,")"]})]}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:e.description})]})]},e.id))}),(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)("button",{onClick:()=>en({open:!1}),className:"px-4 py-2 border rounded",children:"Cancel"}),(0,r.jsx)("button",{onClick:async()=>{h&&((await i.x.put("/api/v1/chat/sessions/".concat(h,"/tools"),{tool_ids:eo.toolIds||[]})).error||en({open:!1}))},className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Save"})]})]})}),$.open&&(0,r.jsxs)(p,{isOpen:$.open,onClose:()=>X({open:!1,session:null}),title:"Delete Session",size:"sm",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-800",children:['Are you sure you want to delete the session "',(null===(t=$.session)||void 0===t?void 0:t.title)||"Untitled",'"?']}),(0,r.jsxs)("div",{className:"mt-4 flex justify-end gap-2",children:[(0,r.jsx)("button",{onClick:()=>X({open:!1,session:null}),className:"px-4 py-2 border rounded",children:"Cancel"}),(0,r.jsx)("button",{onClick:async()=>{if(!$.session)return;let e=$.session.id,t=await i.x.delete("/api/v1/chat/sessions/".concat(e));X({open:!1,session:null}),t.error||(h===e&&b(null),await ec())},className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Delete"})]})]})]})}function g(e){let{onCreateSession:t,onGoConfigure:a,onAutoCreateSession:l}=e,[o,n]=(0,s.useState)([]),[d,c]=(0,s.useState)(""),[x,m]=(0,s.useState)(!1),[h,g]=(0,s.useState)(null),[b,v]=(0,s.useState)(0),[y,f]=(0,s.useState)({open:!1,title:"",message:""}),j=async()=>{if(d.trim()){c(""),n(e=>[...e,{role:"user",content:d}]),m(!0);try{var e,t;let a={messages:[{role:"system",content:"You are a helpful assistant. Always respond in GitHub-Flavored Markdown. Use fenced code blocks with proper language tags (e.g., ```json, ```yaml, ```python, ```javascript) when outputting code, JSON, or YAML. Be concise and structured."},...o.map(e=>({role:e.role,content:e.content})),{role:"user",content:d}]},r=await i.x.post("/api/v1/chat/direct",a);if(r.error){let e=r.error.toString();400===r.status&&e.includes("No default LLM provider configured")?(g({title:"No default LLM provider",body:"Create a chat session to choose a provider, or set a default provider in your configuration.",type:"provider"}),f({open:!0,title:"No LLM Provider",message:"No default LLM provider is configured. Please add a provider in Providers or set one as default."})):400===r.status&&e.toLowerCase().includes("credentials")?(g({title:"LLM credentials missing/invalid",body:"Update your LLM provider configuration with a valid API key.",type:"credentials"}),f({open:!0,title:"LLM Credentials Error",message:"Provider credentials are missing or invalid. Please update your provider configuration."})):(n(t=>[...t,{role:"assistant",content:"Sorry, I could not respond: ".concat(e)}]),f({open:!0,title:"Chat Error",message:e}));return}let s=null!==(t=null==r?void 0:null===(e=r.data)||void 0===e?void 0:e.content)&&void 0!==t?t:"";if(s&&n(e=>[...e,{role:"assistant",content:s}]),v(e=>e+1),b+1>=1){let e=d.length>60?d.slice(0,60)+"…":d;await l(e||"New Chat")}}catch(e){n(e=>[...e,{role:"assistant",content:"Sorry, I could not respond right now."}]),console.error("Quick chat failed",e)}finally{m(!1)}}};return(0,r.jsxs)("div",{className:"flex flex-col h-full bg-white dark:bg-gray-900",children:[(0,r.jsxs)("div",{className:"border-b border-gray-200 dark:border-gray-800 px-6 py-4",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Quick Chat"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Chat without creating a saved session"})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto px-6 py-4 space-y-3",children:[h&&(0,r.jsxs)("div",{className:"p-3 border border-amber-300 dark:border-amber-700/50 bg-amber-50 dark:bg-amber-900/20 rounded-md",children:[(0,r.jsx)("div",{className:"font-medium text-amber-900 dark:text-amber-300",children:h.title}),(0,r.jsx)("div",{className:"text-sm text-amber-800 dark:text-amber-200 mt-1",children:h.body}),(0,r.jsxs)("div",{className:"mt-3 flex gap-2",children:[(0,r.jsx)("button",{onClick:t,className:"px-3 py-1.5 text-sm rounded-md bg-blue-600 text-white hover:bg-blue-700",children:"Create Session"}),(0,r.jsx)("button",{onClick:a,className:"px-3 py-1.5 text-sm rounded-md bg-gray-800 text-white hover:bg-gray-900",children:"Configure Provider"})]})]}),0===o.length?(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Say hello to start chatting."}):o.map((e,t)=>(0,r.jsx)("div",{className:"user"===e.role?"text-right":"text-left",children:(0,r.jsx)("div",{className:"inline-block px-3 py-2 rounded-xl max-w-[75%] text-left border shadow-sm ".concat("user"===e.role?"bg-gradient-to-b from-sky-50 to-sky-100 text-slate-800 border-sky-200 dark:bg-transparent dark:text-slate-100/90 dark:border-slate-700":"bg-white text-slate-800 border-slate-200 dark:bg-transparent dark:text-slate-200 dark:border-slate-700"),children:(0,r.jsx)("div",{className:"".concat((e.role,"prose prose-slate dark:prose-invert")," max-w-none leading-relaxed text-[15px] prose-a:text-blue-600 dark:prose-a:text-blue-300 prose-code:text-emerald-700 dark:prose-code:text-emerald-200"),children:(0,r.jsx)(u,{content:e.content})})})},t))]}),(0,r.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-800 px-6 py-4",children:(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("textarea",{value:d,onChange:e=>c(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),j())},rows:2,placeholder:"Type your message...",className:"flex-1 rounded-md border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 px-3 py-2 resize-none focus:border-blue-500 focus:outline-none focus:ring-blue-500"}),(0,r.jsx)("button",{onClick:j,disabled:x||!d.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed self-end",children:x?"Sending...":"Send"})]})}),y.open&&(0,r.jsxs)(p,{isOpen:y.open,onClose:()=>f({...y,open:!1}),title:y.title,size:"sm",children:[(0,r.jsx)("div",{className:"text-sm text-gray-800 dark:text-gray-200 whitespace-pre-wrap",children:y.message}),(0,r.jsx)("div",{className:"mt-4 flex justify-end",children:(0,r.jsx)("button",{onClick:()=>f({...y,open:!1}),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"OK"})})]})]})}},9222:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var r=a(7437),s=a(1396),l=a.n(s),o=a(4033),n=a(2265);let d={"/dashboard":"Dashboard","/flows":"Flows","/crews":"Crews","/agents":"Agents","/tools":"Tools","/observability":"Observability","/chat":"Chat","/executions":"Executions","/settings":"Settings","/profile":"Profile"};function i(){let{breadcrumbs:e}=function(){let e=(0,o.usePathname)(),t=(0,n.useMemo)(()=>{if(!e)return[];let t=e.split("/").filter(Boolean),a=[];a.push({label:"Home",href:"/dashboard",isActive:"/dashboard"===e});let r="";return t.forEach((e,s)=>{r+="/".concat(e);let l=s===t.length-1;if(!isNaN(Number(e)))return;if("edit"===e){a.push({label:"Edit",href:r,isActive:l});return}let o=d[r]||e.charAt(0).toUpperCase()+e.slice(1);a.push({label:o,href:r,isActive:l})}),a},[e]),a=(0,n.useMemo)(()=>{if(!e)return"Home";let a=t[t.length-1];return(null==a?void 0:a.label)||"Home"},[e,t]);return{breadcrumbs:t,currentPage:a,pathname:e,isActive:t=>null==e?void 0:e.startsWith(t)}}();return e.length<=1?null:(0,r.jsx)("nav",{"aria-label":"Breadcrumb",className:"mb-4",children:(0,r.jsx)("ol",{className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-400",children:e.map((e,t)=>(0,r.jsxs)("li",{className:"flex items-center",children:[t>0&&(0,r.jsx)("svg",{className:"w-4 h-4 text-gray-400 dark:text-gray-500 mx-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),e.isActive?(0,r.jsx)("span",{className:"text-gray-900 dark:text-gray-100 font-medium","aria-current":"page",children:e.label}):(0,r.jsx)(l(),{href:e.href,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors",children:e.label})]},e.href))})})}},1396:function(e,t,a){e.exports=a(5250)}},function(e){e.O(0,[311,279,67,971,458,744],function(){return e(e.s=7444)}),_N_E=e.O()}]);